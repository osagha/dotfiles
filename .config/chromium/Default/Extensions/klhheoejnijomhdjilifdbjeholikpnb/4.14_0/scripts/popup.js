"use strict";function getURL(a){var b="https://tab.bz/"+a;$("#shortURL").val(b),$("#shortURL").focus(),$("#shortURL").select(),$("#openLinkButton").attr("href",b).removeClass("disabled"),$("#condensorButton").removeClass("disabled"),$("#facebook").attr("href","http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#twitter").attr("href","http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#email").attr("href","http://api.addthis.com/oexchange/0.8/forward/email/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#google").attr("href","http://api.addthis.com/oexchange/0.8/forward/google/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#favorites").attr("href","http://api.addthis.com/oexchange/0.8/forward/favorites/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#tumblr").attr("href","http://api.addthis.com/oexchange/0.8/forward/tumblr/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#stumbleupon").attr("href","http://api.addthis.com/oexchange/0.8/forward/stumbleupon/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#linkedin").attr("href","http://api.addthis.com/oexchange/0.8/forward/linkedin/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#gmail").attr("href","http://api.addthis.com/oexchange/0.8/forward/gmail/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#google_plusone").attr("href","http://api.addthis.com/oexchange/0.8/forward/google_plusone/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#evernote").attr("href","http://api.addthis.com/oexchange/0.8/forward/evernote/offer?url=http://tab.bz/"+a+"&title=Check out these links I put together!&pubid=ra-4f24024366df32de"),$("#shortSavedURL").val(b),$("#load").css("display","none")}function sendDDPRequest(a){var b=new Asteroid("tab.bz"),c=moment().utcOffset(),d=b.call("newList",a,c);d.result.then(function(a){getURL(a)})["catch"](function(a){$("#shortURL").val("Error connecting: "+a)})}function getLinks(a){var b=[];b[0]={},b[0].eId=a,chrome.tabs.getAllInWindow(null,function(a){var c=/^http:|^https:/,d=1;a.forEach(function(a){""!==a.url&&"New Tab"!==a.title&&null!==a.url.match(c)&&(b[d]={},b[d].address=a.url,b[d].title=a.title,b[d].type="link",d++)}),b.hasOwnProperty("0")===!1?($("#shortURL").val("open some tabs..."),$("#load").css("display","none")):sendDDPRequest(b)})}function generateUUID(){return uuid.v1()}$(document).ready(function(){chrome.storage.sync.get("extensionId",function(a){a.hasOwnProperty("extensionId")?a=a.extensionId:(a=generateUUID(),chrome.storage.sync.set({extensionId:a})),getLinks(a)}),$("#shortURL").mouseover(function(){"none"===$("#load").css("display")&&($("#shortURL").focus(),$("#shortURL").select(),document.execCommand("Copy"),$("#shortURL").val("URL copied to clipboard!"))}),$("#shortURL").mouseout(function(){"none"===$("#load").css("display")&&($("#shortURL").val($("#shortSavedURL").val()),$("#shortURL").focus())}),$("#condensorButton").click(function(a){a.preventDefault();var b=$("#shortURL").val();chrome.tabs.create({url:b,active:!1},function(a){var b=a.id;chrome.tabs.getAllInWindow(null,function(a){a.forEach(function(a){a.id!==b&&chrome.tabs.remove(a.id)})})})})});