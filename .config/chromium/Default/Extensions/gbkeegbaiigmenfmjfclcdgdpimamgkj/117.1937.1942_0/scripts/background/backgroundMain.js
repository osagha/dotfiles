/*

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("qowtRoot/utils/typeUtils",[],function(){function h(a,e,c){if(c.types.every(function(a){var e=g[a];if(!e)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!e(c.value)})){var h=1===c.types.length?c.types[0]:"["+c.types.join(",")+"]";throw Error("Argument "+e+" passed to function "+a+" was supposed to be of type "+h+" but had value "+c.value);}}var c={checkArgTypes:function(a,e){for(var c in e){var g={value:e[c][0],types:e[c].slice(1)};h(a,c,g)}},isObject:function(a){return"object"===
typeof a&&null!==a},isPromise:function(a){return a instanceof Promise},isPromiseLike:function(a){return!(!a||!c.isFunction(a.then))},isList:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isInteger:function(a){return"number"===typeof a&&parseInt(a,10)===a},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isRegex:function(a){return"[object RegExp]"===
Object.prototype.toString.call(a)},isNode:function(a){return a instanceof Node},isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:function(a){return"boolean"===typeof a},getType:function(a){var e;Object.keys(g).forEach(function(c){g[c](a)&&(e=c)});return e},isArgumentsObjectOrList:function(a){return a instanceof Object&&a.hasOwnProperty("length")},extend:function(a,e){for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c])},createNewType:function(a){var e=function(){},
c={isOfType:function(a){return void 0!==a&&null!==a&&a.constructor===e},markAsType:function(a){Object.defineProperty(a,"constructor",{value:e,configurable:!1,writable:!1,enumerable:!1});return a}};if(a){if(g[a])throw Error("Already registered type "+a);g[a]=c.isOfType}return c}},g={string:c.isString,object:c.isObject,promise:c.isPromise,promiseLike:c.isPromiseLike,node:c.isNode,regex:c.isRegex,"function":c.isFunction,number:c.isNumber,list:c.isList,boolean:c.isBoolean,"null":c.isNull,undefined:c.isUndefined};
return c});(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.isRelease=!0;h.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(h));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(h))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(h){var c={isEnabled:function(a){a=h[a];return void 0===a?!1:a},enable:function(a){h[a]=!0},disable:function(a){h[a]=!1},setOverrides:function(a){for(var e in a)a.hasOwnProperty(e)&&(h[e]=a[e])},isDebug:function(){return void 0!==g?g:!c.isEnabled("isRelease")},setDebugOverride:function(a){g=a},clearDebugOverride:function(){g=void 0}},g;return c});
(function(h){h("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,g,a){a.prototype.delay=function(a){var g=this;return new this.constructor(function(h,v,l){g.then(function(g){c(function(){h(g)},a)},v,l)})};a.prototype.timeout=function(a,h){var p=this,v=1<arguments.length;return new this.constructor(function(l,m,r){var w=c(function(){m(v?h:Error("timed out after "+a+"ms"))},a);p.then(function(a){g(w);l(a)},function(a){g(w);m(a)},r)})};return a}})})("function"===typeof define&&define.amd?
define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var g=Array.prototype.map,a=Array.prototype.reduce,e=Array.prototype.reduceRight,h=Array.prototype.forEach,p=c.resolve,v=c.all;c.any=function(a){return new c(function(c,e){function g(a){F.push(a);0===--v&&e(F)}var v=0,F=[];h.call(a,function(a){++v;p(a).then(c,g)});0===v&&c()})};c.some=function(a,e){return new c(function(c,g,v){function F(a){0<t&&(--t,q.push(a),0===t&&c(q))}function A(a){0<y&&(--y,H.push(a),0===y&&
g(H))}var t=0,y,q=[],H=[];h.call(a,function(a){++t;p(a).then(F,A,v)});e=Math.max(e,0);y=t-e+1;t=Math.min(e,t);0===t&&c(q)})};c.settle=function(a){return v(g.call(a,function(a){function e(){return a.inspect()}a=p(a);return a.then(e,e)}))};c.map=function(a,e,c){return v(g.call(a,function(a){return p(a).then(e,c)}))};c.reduce=function(e,c){function g(a,e,l){return p(a).then(function(a){return p(e).then(function(e){return c(a,e,l)})})}return 2<arguments.length?a.call(e,g,arguments[2]):a.call(e,g)};c.reduceRight=
function(a,c){function g(a,e,l){return p(a).then(function(a){return p(e).then(function(e){return c(a,e,l)})})}return 2<arguments.length?e.call(a,g,arguments[2]):e.call(a,g)};c.prototype.spread=function(a){return this.then(v).then(function(e){return a.apply(void 0,e)})};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var g=c("./timer").set;return function(a){g(function(){throw a;},0)}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function g(){throw new TypeError("catch predicate must be a function");}function a(a,e){return function(){a.call(this);return e}}function e(){}var h=c("./fatal");return function(c){function v(a,c){return function(e){return(c===Error||null!=c&&c.prototype instanceof Error?e instanceof c:c(e))?a.call(this,e):m(e)}}var l=c.resolve,m=c.reject,r=c.prototype["catch"];c.prototype.done=function(a,c){var g=this._handler;
g.when(this._maybeFatal,e,this,g.receiver,a,c)};c.prototype._maybeFatal=function(a){if(Object(a)===a)l(a)["catch"](this._fatal)};c.prototype._fatal=h;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?r.call(this,a):"function"!==typeof a?this.ensure(g):r.call(this,v(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(c){if("function"!==typeof c)return this;c=a(c,this);return this.then(c,c)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function g(a,c,h,l){function m(l){return e(h(l)).then(function(){return g(a,c,h,a(l))})}return e(l).then(function(a){return e(c(a)).then(function(c){return c?a:m(a)})})}function a(c,g,h,l){function m(l,m){return e(h(l)).then(function(){return a(c,g,h,m)})}return e(l).then(function(a){return e(g(a)).then(function(g){return g?a:e(c(a)).spread(m)})})}var e=c.resolve;c.iterate=g;c.unfold=a;return c}})})("function"===
typeof define&&define.amd?define:function(h){module.exports=h()});(function(h){h("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function g(c){var e=this;this._handler=new w;a(c,function(a){e._handler.resolve(a)},function(a){e._handler.reject(a)},function(a){e._handler.notify(a)})}function a(a,c,e,g){try{a(c,e,g)}catch(h){e(h)}}function e(a){return new h(new J(new y(a)))}function h(a){this._handler=a}function p(a,c){if(a instanceof g){var e=a._handler.join();return c===e?new y(new TypeError("Promise cycle")):e}return Ea(a)?l(a):new t(a)}
function v(a){return a instanceof g?a._handler.join():l(a)}function l(a){try{var c=a.then;return"function"===typeof c?new A(c,a):new t(a)}catch(e){return new y(e)}}function m(){}function r(a){this.handler=a;if(this._isMonitored()){var c=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(c)}}function w(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function J(a){r.call(this,a)}function F(a,
c){r.call(this,a);this.receiver=c}function A(a,c){w.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=c}function t(a){this.value=a}function y(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function q(){return{state:"pending"}}function H(a,c,e,g,h,l,m,q){this.a=a;this.b=c;this.c=e;this.d=g;this.e=h;this.f=l;this.g=m;this.handler=q}function G(a,c){this.q=a;this.value=c}function Ea(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function Oa(a,c,g){try{return a.call(g,c)}catch(h){return e(h)}}function Y(){}var Pa,ya=c.scheduler,ga=Object.create||function(a){function c(){}c.prototype=a;return new c};g.resolve=function(a){return a instanceof g?a:new h(new J(p(a)))};g.reject=e;g.never=function(){return Pa};g._defer=function(){return new h(new w)};g.prototype.then=function(a,c,e){var g=this._handler,l=new w(g.receiver);g.when(l.resolve,l.notify,l,g.receiver,a,c,e);return new h(l)};g.prototype["catch"]=g.prototype.otherwise=
function(a){return this.then(void 0,a)};g.prototype._bindContext=function(a){return new h(new F(this._handler,a))};g.all=function(a){function c(a,e,g,h){g.when(Y,Y,void 0,a,function(a){e[h]=a;0===--l&&this.resolve(e)},a.reject,a.notify)}var e=new w,g=a.length>>>0,l=g,m=[],q,p;for(q=0;q<g;++q)q in a?(p=a[q],Ea(p)?c(e,m,v(p),q):(m[q]=p,--l)):--l;0===l&&e.resolve(m);return new h(e)};g.race=function(a){if(Object(a)===a&&0===a.length)return Pa;for(var c=new w,e=0;e<a.length;++e)p(a[e]).when(Y,Y,void 0,
c,c.resolve,c.reject);return new h(c)};h.prototype=ga(g.prototype);m.prototype.inspect=q;m.prototype.when=Y;m.prototype.resolve=Y;m.prototype.reject=Y;m.prototype.notify=Y;m.prototype.join=function(){return this};m.prototype._env=c.monitor||g;m.prototype._addTrace=Y;m.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};r.prototype=ga(m.prototype);r.prototype.join=function(){return this.handler.join()};r.prototype.inspect=function(){return this.handler.inspect()};
r.prototype._addTrace=function(a){return this.handler._addTrace(a)};w.prototype=ga(m.prototype);w.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():q()};w.prototype.resolve=function(a){this._join(p(a,this))};w.prototype.reject=function(a){this._join(new y(a))};w.prototype.join=function(){return this.resolved?this.handler.join():this};w.prototype.run=function(){var a=this.consumers,c=this.handler=this.handler.join();this.consumers=void 0;for(var e=0;e<a.length;e+=7)c.when(a[e],
a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])};w.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,ya.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};w.prototype.when=function(a,c,e,g,h,l,m){this.resolved?ya.enqueue(new H(a,c,e,g,h,l,m,this.handler.join())):this.consumers.push(a,c,e,g,h,l,m)};w.prototype.notify=function(a){this.resolved||ya.enqueue(new G(this.consumers,a))};w.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):
a};J.prototype=ga(r.prototype);J.prototype.when=function(a,c,e,g,h,l,m){ya.enqueue(new H(a,c,e,g,h,l,m,this.join()))};F.prototype=ga(r.prototype);F.prototype.when=function(a,c,e,g,h,l,m){void 0!==this.receiver&&(g=this.receiver);this.join().when(a,c,e,g,h,l,m)};A.prototype=ga(w.prototype);A.prototype.when=function(a,c,e,g,h,l,m){this.assimilated||(this.assimilated=!0,this._assimilate());w.prototype.when.call(this,a,c,e,g,h,l,m)};A.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,
this.thenable,function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};A.prototype._try=function(a,c,e,g,h){try{a.call(c,e,g,h)}catch(l){g(l)}};t.prototype=ga(m.prototype);t.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};t.prototype.when=function(a,c,e,g,h){c="function"===typeof h?Oa(h,this.value,g):this.value;a.call(e,c)};y.prototype=ga(m.prototype);y.prototype.inspect=function(){return{state:"rejected",reason:this.value}};y.prototype.when=function(a,
c,g,h,l,m){this._isMonitored()&&!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;c="function"===typeof m?Oa(m,this.value,h):e(this.value);a.call(g,c)};y.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};Pa=new h(new m);H.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};G.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};G.prototype._notify=
function(a,c,e,g){var h;if("function"===typeof g)try{h=g.call(e,this.value)}catch(l){h=l}else h=this.value;a.call(c,h)};return g}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/Queue",[],function(){function c(c){this.head=this.tail=this.length=0;this.buffer=Array(1<<c)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var a=this.head,e=this.buffer,h=Array(c),p=0,v;if(0===a)for(v=this.length;p<v;++p)h[p]=e[p];else{c=e.length;for(v=this.tail;a<c;++p,++a)h[p]=e[a];for(a=0;a<v;++p,++a)h[p]=e[a]}this.buffer=h;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function g(c){this._enqueue=c;this._handlerQueue=new a(15);var g=this;this.drainQueue=function(){g._drainQueue()}}var a=c("./Queue");g.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};g.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return g})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/async",["require"],function(c){var g;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(a){process.nextTick(a)}:(g="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(a,c){var g,h=a.createElement("div");(new c(function(){var a=g;g=void 0;a()})).observe(h,{attributes:!0});return function(a){g=a;h.setAttribute("class","x")}}(document,
g):function(a){var c=setTimeout;return function(a){c(a,0)}}(c)})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var g=c("./makePromise"),a=c("./scheduler");c=c("./async");return g({scheduler:new a(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function g(a,c,e,g){var h=y(a);return 2>arguments.length?h:h.then(c,e,g)}function a(a){return function(){return h(a,this,q.call(arguments))}}function e(a){return h(a,this,q.call(arguments,1))}function h(a,c,e){return t.all(e).then(function(e){return a.apply(c,e)})}function p(){function a(c){g._handler.resolve(c)}
function c(a){g._handler.reject(a)}function e(a){g._handler.notify(a)}var g=t._defer();this.promise=g;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var v=c("./lib/timer"),l=c("./lib/timed"),m=c("./lib/array"),r=c("./lib/flow"),w=c("./lib/inspect"),J=c("./lib/iterate"),F=c("./lib/progress"),A=c("./lib/with"),t=c("./lib/Promise"),t=[m,r,J,F,w,A].reduceRight(function(a,c){return c(a)},l(v.set,v.clear,t)),y=t.resolve,q=Array.prototype.slice;g.promise=function(a){return new t(a)};
g.resolve=t.resolve;g.reject=t.reject;g.lift=a;g["try"]=e;g.attempt=e;g.iterate=t.iterate;g.unfold=t.unfold;g.join=function(){return t.all(arguments)};g.all=function(a){return g(a,t.all)};g.settle=function(a){return g(a,t.settle)};g.any=a(t.any);g.some=a(t.some);g.map=function(a,c){return g(a,function(a){return t.map(a,c)})};g.reduce=function(a,c){var e=q.call(arguments,1);return g(a,function(a){e.unshift(a);return t.reduce.apply(t,e)})};g.reduceRight=function(a,c){var e=q.call(arguments,1);return g(a,
function(a){e.unshift(a);return t.reduceRight.apply(t,e)})};g.isPromiseLike=function(a){return a&&"function"===typeof a.then};g.Promise=t;g.defer=function(){return new p};return g})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(h,c){var g={cast:function(a){return a instanceof Promise?a:Promise.resolve(a)},delay:function(a,c){a=a||0;return new Promise(function(g){setTimeout(g.bind(void 0,c),a)})},delayThenReject:function(a,c){a=a||0;return new Promise(function(g,h){setTimeout(h.bind(g,c),a)})},throwAndEscapeChain:function(a){a instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",a),a=
Error(a));c.reject(a).done();throw a;},pipeline:function(a){function c(){for(var p=Array.prototype.slice.call(arguments,0);0<a.length;){var l=a.shift();if(h.isPromiseLike(l))return g.cast(l).then(function(g){a.unshift(g);return c.apply(u,p)});h.checkArgTypes("PromiseUtils.pipeline",{task:[l,"function"]});l=l.apply(u,p);if(h.isPromiseLike(l))return g.cast(l).then(function(a){return c(a)});p=[l]}return p[0]}var u=this,p=Array.prototype.slice.call(arguments,0);if(p.some(h.isPromiseLike))return Promise.all(p).then(function(a){return g.pipeline.apply(u,
a)});h.checkArgTypes("PromiseUtils.pipeline",{tasks:[a,"list"]});a=a.slice(0);return c.apply(u,p.slice(1))},finally:function(a,c){function h(){return g.cast(c()).then(function(){return a})}return g.cast(a).then(h,h)},waitForNextMacroTurn:function(a){return new Promise(function(c){window.setTimeout(c.bind(null,a),0)})}};return g});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(h,c){function g(c,e){var g;void 0!==t?g=t?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!h.isDebug()||void 0!==window.__gaMock)?g=Promise.resolve():(console.warn("GA not supported on this platform"),g=Promise.reject(Error("GA not supported on this platform"))),
g=g.then(a).catch(p));return g.then(v).then(c.bind(null,e)).catch(function(){})}function a(){var a=Error("Crash reporting setting timed out");return Promise.race([e(),c.delayThenReject(1E3,a)]).then(u)}function e(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function u(a){return new Promise(function(c,e){y=window.analytics.getService(F);y.getConfig().addCallback(function(g){g.setTrackingPermitted(a);(t=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function p(){t=!1;return Promise.reject()}function v(){void 0===q&&l("QO");return Promise.resolve()}function l(a){q&&q.sendAppView(a);q=y.getTracker(J[a]);H&&q.set(window.analytics.Parameters.SESSION_GROUP,H);q.forceSessionStart();return Promise.resolve()}function m(a){A!==a&&(A=a,q.sendAppView(a));return Promise.resolve()}function r(a){q.sendException(a.msg,a.fatal);return Promise.resolve()}function w(a){q.sendEvent(a.category,a.action,a.label,a.value);return Promise.resolve()}var J={word:"UA-44583639-1",
sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},F="Quickoffice",A,t,y,q,H;return{setSessionGroup:function(a){H=a},setTracker:function(a){return g(l,a)},sendState:function(a){return g(m,a)},sendException:function(a){return g(r,a)},sendEvent:function(a){return g(w,a)},reset:function(){q=y=t=A=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(h,c){var g={getMessage:function(a,c){var u="????";if(!chrome||!chrome.i18n)return a;h.isString(a)?(u=chrome.i18n.getMessage(a,c),u||(u=a,g.logError_("Missing translation",a))):g.logError_("Invalid string translation Id",a);return u},logError_:function(a,e){console.error(a+" "+e);c.sendException({msg:a,fatal:!1})}};return g});
(function(){function h(a,f){return a.set(f[0],f[1]),a}function c(a,f){return a.add(f),a}function g(a,f,c){switch(c.length){case 0:return a.call(f);case 1:return a.call(f,c[0]);case 2:return a.call(f,c[0],c[1]);case 3:return a.call(f,c[0],c[1],c[2])}return a.apply(f,c)}function a(a,f,c,e){for(var g=-1,h=a.length;++g<h;){var l=a[g];f(e,l,c(l),a)}return e}function e(a,f){for(var c=-1,e=a.length;++c<e&&!1!==f(a[c],c,a););return a}function u(a,f){for(var c=-1,e=a.length;++c<e;)if(!f(a[c],c,a))return!1;
return!0}function p(a,c){for(var e=-1,g=a.length,h=-1,l=[];++e<g;){var k=a[e];c(k,e,a)&&(l[++h]=k)}return l}function v(a,c){return!!a.length&&-1<q(a,c,0)}function l(a,c,e){for(var g=-1,h=a.length;++g<h;)if(e(c,a[g]))return!0;return!1}function m(a,c){for(var e=-1,g=a.length,h=Array(g);++e<g;)h[e]=c(a[e],e,a);return h}function r(a,c){for(var e=-1,g=c.length,h=a.length;++e<g;)a[h+e]=c[e];return a}function w(a,c,e,g){var h=-1,l=a.length;for(g&&l&&(e=a[++h]);++h<l;)e=c(e,a[h],h,a);return e}function J(a,
c,e,g){var h=a.length;for(g&&h&&(e=a[--h]);h--;)e=c(e,a[h],h,a);return e}function F(a,c){for(var e=-1,g=a.length;++e<g;)if(c(a[e],e,a))return!0;return!1}function A(a,c,e){for(var g=-1,h=a.length;++g<h;){var l=a[g],m=c(l);if(null!=m&&(q===k?m===m:e(m,q)))var q=m,p=l}return p}function t(a,c,e,g){var h;return e(a,function(a,e,l){return c(a,e,l)?(h=g?e:a,!1):void 0}),h}function y(a,c,e){for(var g=a.length,h=e?g:-1;e?h--:++h<g;)if(c(a[h],h,a))return h;return-1}function q(a,c,e){if(c!==c)return Kc(a,e);
--e;for(var g=a.length;++e<g;)if(a[e]===c)return e;return-1}function H(a,c,e,g,h){return h(a,function(a,h,l){e=g?(g=!1,a):c(e,a,h,l)}),e}function G(a,c){var e=a.length;for(a.sort(c);e--;)a[e]=a[e].c;return a}function Ea(a,c){for(var e,g=-1,h=a.length;++g<h;){var l=c(a[g]);l!==k&&(e=e===k?l:e+l)}return e}function Oa(a,c){for(var e=-1,g=Array(a);++e<a;)g[e]=c(e);return g}function Y(a,c){return m(c,function(c){return[c,a[c]]})}function Pa(a){return function(c){return a(c)}}function ya(a,c){return m(c,
function(c){return a[c]})}function ga(a,c){for(var e=-1,g=a.length;++e<g&&-1<q(c,a[e],0););return e}function Ic(a,c){for(var e=a.length;e--&&-1<q(c,a[e],0););return e}function pa(a){return a&&a.Object===Object?a:null}function Jc(a,c){if(a!==c){var e=null===a,g=a===k,h=a===a,l=null===c,m=c===k,q=c===c;if(a>c&&!l||!h||e&&!m&&q||g&&q)return 1;if(c>a&&!e||!q||l&&!g&&h||m&&h)return-1}return 0}function te(a){return Ob[a]}function ue(a){return Pb[a]}function ve(a){return"\\"+Qb[a]}function Kc(a,c,e){var g=
a.length;for(c+=e?0:-1;e?c--:++c<g;){var h=a[c];if(h!==h)return c}return-1}function bb(a){var c=!1;if(null!=a&&"function"!=typeof a.toString)try{c=!!(a+"")}catch(e){}return c}function za(a,c){return a="number"==typeof a||Rb.test(a)?+a:-1,-1<a&&0==a%1&&(null==c?9007199254740991:c)>a}function Lc(a){for(var c,e=[];!(c=a.next()).done;)e.push(c.value);return e}function Nb(a){var c=-1,e=Array(a.size);return a.forEach(function(a,g){e[++c]=[g,a]}),e}function Aa(a,c){for(var e=-1,g=a.length,h=-1,l=[];++e<
g;){var k=a[e];(k===c||"__lodash_placeholder__"===k)&&(a[e]="__lodash_placeholder__",l[++h]=e)}return l}function pb(a){var c=-1,e=Array(a.size);return a.forEach(function(a){e[++c]=a}),e}function cb(a){if(!a||!qb.test(a))return a.length;for(var c=aa.lastIndex=0;aa.test(a);)c++;return c}function we(a){return Sb[a]}function Mc(M){function f(b){if(P(b)&&!B(b)&&!(b instanceof C)){if(b instanceof Z)return b;if(O.call(b,"__wrapped__"))return Nc(b)}return new Z(b)}function X(){}function Z(b,d){this.__wrapped__=
b;this.__actions__=[];this.__chain__=!!d;this.__index__=0;this.__values__=k}function C(b){this.__wrapped__=b;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function xa(){}function Ba(b){var d=-1,n=b?b.length:0;for(this.clear();++d<n;){var a=b[d];this.set(a[0],a[1])}}function oa(b){var d=-1,n=b?b.length:0;for(this.__data__=new Ba;++d<n;)this.push(b[d])}function pa(b,d){var n=b.__data__;return Qa(d)?(n=n.__data__,"__lodash_hash_undefined__"===
("string"==typeof d?n.string:n.hash)[d]):n.has(d)}function qa(b){var d=-1,n=b?b.length:0;for(this.clear();++d<n;){var a=b[d];this.set(a[0],a[1])}}function ab(b,d){var n=db(b,d);return 0>n?!1:(n==b.length-1?b.pop():rb.call(b,n,1),!0)}function ob(b,d){var n=db(b,d);return 0>n?k:b[n][1]}function db(b,d){for(var n=b.length;n--;)if(ra(b[n][0],d))return n;return-1}function Oc(b,d,n){var a=db(b,d);0>a?b.push([d,n]):b[a][1]=n}function Tb(b,d,n,a){return b===k||ra(b,Ra[n])&&!O.call(a,n)?d:b}function Pc(b,
d,n){(n===k||ra(b[d],n))&&("number"!=typeof d||n!==k||d in b)||(b[d]=n)}function sb(b,d,n){var a=b[d];O.call(b,d)&&ra(a,n)&&(n!==k||d in b)||(b[d]=n)}function Ob(b,d,n,a){return sa(b,function(b,c,e){d(a,b,n(b),e)}),a}function Qc(b,d){return b&&eb(d,T(d),b)}function Ub(b,d){for(var n=-1,a=null==b,c=d.length,e=Array(c);++n<c;)e[n]=a?k:fb(b,d[n]);return e}function Vb(b){return Q(b)?b:[]}function Fa(b){return"function"==typeof b?b:ha}function Ga(b){return B(b)?b:Rc(b)}function Sa(b,d,n){return b===b&&
(n!==k&&(b=b>n?n:b),d!==k&&(b=d>b?d:b)),b}function ia(b,d,n,a,c,f){var g;if(n&&(g=c?n(b,a,c,f):n(b)),g!==k)return g;if(!N(b))return b;if(a=B(b)){if(g=ye(b),!d)return U(b,g)}else{var h=ja(b),l="[object Function]"==h||"[object GeneratorFunction]"==h;if(Sc(b))return ze(b,d);if("[object Object]"==h||"[object Arguments]"==h||l&&!c){if(bb(b))return c?b:{};if(g=Ae(l?{}:b),!d)return Tc(b,Qc(g,b))}else{if(!I[h])return c?b:{};g=Be(b,h,d)}}return f||(f=new qa),(c=f.get(b))?c:(f.set(b,g),(a?e:ka)(b,function(a,
c){sb(g,c,ia(a,d,n,c,b,f))}),a?g:Tc(b,g))}function Pb(b){var d=T(b),n=d.length;return function(a){if(null==a)return!n;for(var c=n;c--;){var e=d[c],f=b[e],g=a[e];if(g===k&&!(e in Object(a))||!f(g))return!1}return!0}}function Ta(b){return N(b)?Ce(b):{}}function Uc(b,d,n){if("function"!=typeof b)throw new ba("Expected a function");return tb(function(){b.apply(k,n)},d)}function Ha(b,d,n,a){var c=-1,e=v,f=!0,g=b.length,h=[],k=d.length;if(!g)return h;n&&(d=m(d,Pa(n)));a?(e=l,f=!1):200<=d.length&&(e=pa,
f=!1,d=new oa(d));a:for(;++c<g;){var q=b[c],p=n?n(q):q;if(f&&p===p){for(var r=k;r--;)if(d[r]===p)continue a;h.push(q)}else e(d,p,a)||h.push(q)}return h}function Qb(b,d){var n=!0;return sa(b,function(b,a,c){return n=!!d(b,a,c)}),n}function Vc(b,d){var n=[];return sa(b,function(b,a,c){d(b,a,c)&&n.push(b)}),n}function L(b,d,n,a){a||(a=[]);for(var c=-1,e=b.length;++c<e;){var f=b[c];0<d&&Q(f)&&(n||B(f)||Ia(f))?1<d?L(f,d-1,n,a):r(a,f):n||(a[a.length]=f)}return a}function Rb(b,d){return null==b?b:Wb(b,d,
ca)}function ka(b,d){return b&&Wb(b,d,T)}function Xb(b,d){return b&&Wc(b,d,T)}function ub(b,d){return p(d,function(d){return da(b[d])})}function Yb(b,d){d=ta(d,b)?[d+""]:Ga(d);for(var n=0,a=d.length;null!=b&&a>n;)b=b[d[n++]];return n&&n==a?b:k}function Zb(b,d){return O.call(b,d)||"object"==typeof b&&d in b&&null===vb(b)}function Sb(b,d){return d in Object(b)}function $b(b,d,n){for(var a=n?l:v,c=b.length,e=c,f=Array(c),g=[];e--;){var h=b[e];e&&d&&(h=m(h,Pa(d)));f[e]=n||!d&&120>h.length?k:new oa(e&&
h)}var h=b[0],q=-1,p=h.length,r=f[0];a:for(;++q<p;){var t=h[q],u=d?d(t):t;if(r?!pa(r,u):!a(g,u,n)){for(e=c;--e;){var w=f[e];if(w?!pa(w,u):!a(b[e],u,n))continue a}r&&r.push(u);g.push(t)}}return g}function Hc(b,d,n,a){return ka(b,function(b,c,e){d(a,n(b),c,e)}),a}function gb(b,d,n){return ta(d,b)||(d=Ga(d),b=hb(b,d),d=V(d)),d=null==b?b:b[d],null==d?k:g(d,b,n)}function Ja(b,d,n,a,c){if(b===d)return!0;if(null==b||null==d||!N(b)&&!P(d))return b!==b&&d!==d;var e=B(b),f=B(d),g="[object Array]",h="[object Array]";
e||(g=ja(b),"[object Arguments]"==g?g="[object Object]":"[object Object]"!=g&&(e=Ua(b)));f||(h=ja(d),"[object Arguments]"==h?h="[object Object]":"[object Object]"!=h&&Ua(d));var l="[object Object]"==g&&!bb(b),f="[object Object]"==h&&!bb(d),h=g==h;!h||e||l?2&a||(g=l&&O.call(b,"__wrapped__"),f=f&&O.call(d,"__wrapped__"),!g&&!f)?h?(c||(c=new qa),b=(e?De:Ee)(b,d,Ja,n,a,c)):b=!1:b=Ja(g?b.value():b,f?d.value():d,n,a,c):b=Fe(b,d,g,Ja,n,a);return b}function ac(b,d,n,a){var c=n.length,e=c,f=!a;if(null==b)return!e;
for(b=Object(b);c--;){var g=n[c];if(f&&g[2]?g[1]!==b[g[0]]:!(g[0]in b))return!1}for(;++c<e;){var g=n[c],h=g[0],l=b[h],m=g[1];if(f&&g[2]){if(l===k&&!(h in b))return!1}else if(g=new qa,h=a?a(l,m,h,b,d,g):k,h===k?!Ja(m,l,a,3,g):!h)return!1}return!0}function Xc(b){var d=typeof b;return"function"==d?b:null==b?ha:"object"==d?B(b)?Yc(b[0],b[1]):Zc(b):$c(b)}function ad(b){b=null==b?b:Object(b);var d,n=[];for(d in b)n.push(d);return n}function bd(b,d){var n=-1,a=ea(b)?Array(b.length):[];return sa(b,function(b,
c,e){a[++n]=d(b,c,e)}),a}function Zc(b){var d=bc(b);if(1==d.length&&d[0][2]){var n=d[0][0],a=d[0][1];return function(b){return null==b?!1:b[n]===a&&(a!==k||n in Object(b))}}return function(n){return n===b||ac(n,b,d)}}function Yc(b,d){return function(n){var a=fb(n,b);return a===k&&a===d?cd(n,b):Ja(d,a,k,3)}}function wb(b,d,n,a,c){if(b!==d){var f=B(d)||Ua(d)?k:ca(d);e(f||d,function(e,g){if(f&&(g=e,e=d[g]),N(e)){c||(c=new qa);var h=g,l=c,m=b[h],q=d[h],p=l.get(q);if(!p){var p=a?a(m,q,h+"",b,d,l):k,r=
p===k;r&&(p=q,B(q)||Ua(q)?B(m)?p=m:Q(m)?p=U(m):(r=!1,p=ia(q,!0)):cc(q)||Ia(q)?Ia(m)?p=dd(m):!N(m)||n&&da(m)?(r=!1,p=ia(q,!0)):p=m:r=!1);l.set(q,p);r&&wb(p,q,n,a,l)}Pc(b,h,p)}else h=a?a(b[g],e,g+"",b,d,c):k,h===k&&(h=e),Pc(b,g,h)})}}function ed(b,d,n){var a=-1,c=z();return d=m(d.length?d:Array(1),function(b){return c(b)}),b=bd(b,function(b,n,c){return{a:m(d,function(d){return d(b)}),b:++a,c:b}}),G(b,function(b,d){var a;a:{a=-1;for(var c=b.a,e=d.a,xe=c.length,f=n.length;++a<xe;){var g=Jc(c[a],e[a]);
if(g){if(a>=f){a=g;break a}a=g*("desc"==n[a]?-1:1);break a}}a=b.b-d.b}return a})}function fd(b,d){return b=Object(b),w(d,function(d,a){return a in b&&(d[a]=b[a]),d},{})}function gd(b,d){var n={};return Rb(b,function(b,a){d(b,a)&&(n[a]=b)}),n}function dc(b){return function(d){return null==d?k:d[b]}}function Ge(b){return function(d){return Yb(d,b)}}function hd(b,d,n){var a=-1,c=d.length,e=b;for(n&&(e=m(b,function(b){return n(b)}));++a<c;)for(var g=0,f=d[a],f=n?n(f):f;-1<(g=q(e,f,g));)e!==b&&rb.call(e,
g,1),rb.call(b,g,1);return b}function id(b,d){for(var n=b?d.length:0,a=n-1;n--;){var c=d[n];if(a==n||c!=e){var e=c;if(za(c))rb.call(b,c,1);else if(ta(c,b))delete b[c];else{var c=Ga(c),g=hb(b,c);null!=g&&delete g[V(c)]}}}return b}function ec(b,d){return b+xb(jd()*(d-b+1))}function fc(b,d,n,a){d=ta(d,b)?[d+""]:Ga(d);for(var c=-1,e=d.length,g=e-1,f=b;null!=f&&++c<e;){var h=d[c];if(N(f)){var l=n;if(c!=g){var m=f[h],l=a?a(m,h,f):k;l===k&&(l=null==m?za(d[c+1])?[]:{}:m)}sb(f,h,l)}f=f[h]}return b}function ua(b,
d,n){var a=-1,c=b.length;0>d&&(d=-d>c?0:c+d);n=n>c?c:n;0>n&&(n+=c);c=d>n?0:n-d>>>0;d>>>=0;for(n=Array(c);++a<c;)n[a]=b[a+d];return n}function He(b,d){var n;return sa(b,function(b,a,c){return n=d(b,a,c),!n}),!!n}function yb(b,d,n){var a=0,c=b?b.length:a;if("number"==typeof d&&d===d&&2147483647>=c){for(;c>a;){var e=a+c>>>1,f=b[e];(n?d>=f:d>f)&&null!==f?a=e+1:c=e}return c}return gc(b,d,ha,n)}function gc(b,d,n,a){d=n(d);for(var c=0,e=b?b.length:0,f=d!==d,g=null===d,h=d===k;e>c;){var l=xb((c+e)/2),m=n(b[l]),
q=m!==k,p=m===m;(f?p||a:g?p&&q&&(a||null!=m):h?p&&(a||q):null==m?0:a?d>=m:d>m)?c=l+1:e=l}return fa(e,4294967294)}function kd(b,d){for(var n=0,a=b.length,c=b[0],e=d?d(c):c,f=e,g=0,h=[c];++n<a;)c=b[n],e=d?d(c):c,ra(e,f)||(f=e,h[++g]=c);return h}function Ka(b,d,n){var a=-1,c=v,e=b.length,f=!0,g=[],h=g;if(n)f=!1,c=l;else if(200>e)h=d?[]:g;else{if(c=d?null:Ie(b))return pb(c);f=!1;c=pa;h=new oa}a:for(;++a<e;){var k=b[a],m=d?d(k):k;if(f&&m===m){for(var q=h.length;q--;)if(h[q]===m)continue a;d&&h.push(m);
g.push(k)}else c(h,m,n)||(h!==g&&h.push(m),g.push(k))}return g}function zb(b,d,n,a){for(var c=b.length,e=a?c:-1;(a?e--:++e<c)&&d(b[e],e,b););return n?ua(b,a?0:e,a?e+1:c):ua(b,a?e+1:0,a?c:e)}function ld(b,d){var n=b;return n instanceof C&&(n=n.value()),w(d,function(b,d){return d.func.apply(d.thisArg,r([b],d.args))},n)}function hc(b,d,n){for(var a=-1,c=b.length;++a<c;)var e=e?r(Ha(e,b[a],d,n),Ha(b[a],e,d,n)):b[a];return e&&e.length?Ka(e,d,n):[]}function md(b,d,n){for(var a=-1,c=b.length,e=d.length,
f={};++a<c;)n(f,b[a],e>a?d[a]:k);return f}function ze(b,d){if(d)return b.slice();var a=new b.constructor(b.length);return b.copy(a),a}function nd(b){var d=new b.constructor(b.byteLength);return(new Ab(d)).set(new Ab(b)),d}function od(b,d,a,c){var e=-1,f=b.length,g=a.length,h=-1,l=d.length,k=R(f-g,0),m=Array(l+k);for(c=!c;++h<l;)m[h]=d[h];for(;++e<g;)(c||f>e)&&(m[a[e]]=b[e]);for(;k--;)m[h++]=b[e++];return m}function pd(b,d,a,c){var e=-1,f=b.length,g=-1,h=a.length,l=-1,k=d.length,m=R(f-h,0),q=Array(m+
k);for(c=!c;++e<m;)q[e]=b[e];for(m=e;++l<k;)q[m+l]=d[l];for(;++g<h;)(c||f>e)&&(q[m+a[g]]=b[e++]);return q}function U(b,d){var a=-1,c=b.length;for(d||(d=Array(c));++a<c;)d[a]=b[a];return d}function eb(b,d,a){return ic(b,d,a)}function ic(b,d,a,c){a||(a={});for(var e=-1,f=d.length;++e<f;){var g=d[e],h=c?c(a[g],b[g],g,a,b):b[g];sb(a,g,h)}return a}function Tc(b,d){return eb(b,Je(b),d)}function Bb(b,d){return function(n,c){var e=B(n)?a:Ob,f=d?d():{};return e(n,b,z(c),f)}}function Va(b){return x(function(d,
a){var c=-1,e=a.length,f=1<e?a[e-1]:k,g=2<e?a[2]:k,f="function"==typeof f?(e--,f):k;g&&la(a[0],a[1],g)&&(f=3>e?k:f,e=1);for(d=Object(d);++c<e;)(g=a[c])&&b(d,g,c,f);return d})}function qd(b,d){return function(a,c){if(null==a)return a;if(!ea(a))return b(a,c);for(var e=a.length,f=d?e:-1,g=Object(a);(d?f--:++f<e)&&!1!==c(g[f],f,g););return a}}function rd(b){return function(d,a,c){var e=-1,f=Object(d);c=c(d);for(var g=c.length;g--;){var h=c[b?g:++e];if(!1===a(f[h],h,f))break}return d}}function Ke(b,d,
a){function c(){return(this&&this!==ma&&this instanceof c?f:b).apply(e?a:this,arguments)}var e=1&d,f=ib(b);return c}function sd(b){return function(d){d=E(d);var a=qb.test(d)?d.match(aa):k,c=a?a[0]:d.charAt(0);return d=a?a.slice(1).join(""):d.slice(1),c[b]()+d}}function Wa(b){return function(d){return w(td(ud(d)),b,"")}}function ib(b){return function(){var d=arguments;switch(d.length){case 0:return new b;case 1:return new b(d[0]);case 2:return new b(d[0],d[1]);case 3:return new b(d[0],d[1],d[2]);case 4:return new b(d[0],
d[1],d[2],d[3]);case 5:return new b(d[0],d[1],d[2],d[3],d[4]);case 6:return new b(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var a=Ta(b.prototype),d=b.apply(a,d);return N(d)?d:a}}function Le(b,d,a){function c(){for(var f=arguments.length,h=Array(f),l=f,m=Xa(c);l--;)h[l]=arguments[l];return l=3>f&&h[0]!==m&&h[f-1]!==m?[]:Aa(h,m),f-=l.length,a>f?vd(b,d,Cb,c.placeholder,k,h,l,k,k,a-f):g(this&&this!==ma&&this instanceof c?e:b,this,h)}var e=ib(b);return c}function wd(b){return x(function(d){d=
L(d,1);var a=d.length,c=a,e=Z.prototype.thru;for(b&&d.reverse();c--;){var f=d[c];if("function"!=typeof f)throw new ba("Expected a function");if(e&&!g&&"wrapper"==Db(f))var g=new Z([],!0)}for(c=g?c:a;++c<a;)var f=d[c],e=Db(f),h="wrapper"==e?jc(f):k,g=h&&kc(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[Db(h[0])].apply(g,h[3]):1==f.length&&kc(f)?g[e]():g.thru(f);return function(){var b=arguments,c=b[0];if(g&&1==b.length&&B(c)&&200<=c.length)return g.plant(c).value();for(var e=0,b=a?d[e].apply(this,b):c;++e<
a;)b=d[e].call(this,b);return b}})}function Cb(b,d,a,c,e,f,g,h,l,m){function q(){for(var y=arguments.length,H=y,G=Array(y);H--;)G[H]=arguments[H];if(u){var x,A=Xa(q),H=G.length;for(x=0;H--;)G[H]===A&&x++}if(c&&(G=od(G,c,e,u)),f&&(G=pd(G,f,g,u)),y-=x,u&&m>y)return A=Aa(G,A),vd(b,d,Cb,q.placeholder,a,G,A,h,l,m-y);if(A=r?a:this,H=t?A[b]:b,y=G.length,h){x=G.length;for(var z=fa(h.length,x),Ea=U(G);z--;){var B=h[z];G[z]=za(B,x)?Ea[B]:k}}else v&&1<y&&G.reverse();return p&&y>l&&(G.length=l),this&&this!==
ma&&this instanceof q&&(H=w||ib(H)),H.apply(A,G)}var p=128&d,r=1&d,t=2&d,u=24&d,v=512&d,w=t?k:ib(b);return q}function xd(b,d){return function(a,c){return Hc(a,b,d(c),{})}}function lc(b){return x(function(d){return d=m(L(d,1),z()),x(function(a){var c=this;return b(d,function(b){return g(b,c,a)})})})}function Eb(b,d,a){return d=D(d),b=cb(b),d&&d>b?(d-=b,a=a===k?" ":a+"",b=yd(a,Fb(d/cb(a))),qb.test(a)?b.match(aa).slice(0,d).join(""):b.slice(0,d)):""}function Me(b,d,a,c){function e(){for(var d=-1,l=arguments.length,
k=-1,m=c.length,q=Array(m+l),p=this&&this!==ma&&this instanceof e?h:b;++k<m;)q[k]=c[k];for(;l--;)q[k++]=arguments[++d];return g(p,f?a:this,q)}var f=1&d,h=ib(b);return e}function zd(b){return function(d,a,c){c&&"number"!=typeof c&&la(d,a,c)&&(a=c=k);d=S(d);d=d===d?d:0;a===k?(a=d,d=0):a=S(a)||0;c=c===k?a>d?1:-1:S(c)||0;var e=-1;a=R(Fb((a-d)/(c||1)),0);for(var f=Array(a);a--;)f[b?a:++e]=d,d+=c;return f}}function vd(b,d,a,c,e,f,g,h,l,m){var q=8&d;h=h?U(h):k;var p=q?g:k;g=q?k:g;var r=q?f:k;return f=q?
k:f,d=(d|(q?32:64))&~(q?64:32),4&d||(d&=-4),d=[b,d,e,r,p,f,g,h,l,m],a=a.apply(k,d),kc(b)&&Ad(a,d),a.placeholder=c,a}function mc(b){var d=Ya[b];return function(b,a){if(b=S(b),a=D(a)){var c=(E(b)+"e").split("e"),c=d(c[0]+"e"+(+c[1]+a)),c=(E(c)+"e").split("e");return+(c[0]+"e"+(+c[1]-a))}return d(b)}}function va(b,d,a,c,e,f,g,h){var l=2&d;if(!l&&"function"!=typeof b)throw new ba("Expected a function");var m=c?c.length:0;if(m||(d&=-97,c=e=k),g=g===k?g:R(D(g),0),h=h===k?h:D(h),m-=e?e.length:0,64&d){var q=
c,p=e;c=e=k}var r=l?k:jc(b);return f=[b,d,a,c,e,q,p,f,g,h],r&&(a=f[1],b=r[1],d=a|b,c=128==b&&8==a||128==b&&256==a&&r[8]>=f[7].length||384==b&&r[8]>=r[7].length&&8==a,131>d||c)&&(1&b&&(f[2]=r[2],d|=1&a?0:4),(a=r[3])&&(c=f[3],f[3]=c?od(c,a,r[4]):U(a),f[4]=c?Aa(f[3],"__lodash_placeholder__"):U(r[4])),(a=r[5])&&(c=f[5],f[5]=c?pd(c,a,r[6]):U(a),f[6]=c?Aa(f[5],"__lodash_placeholder__"):U(r[6])),(a=r[7])&&(f[7]=U(a)),128&b&&(f[8]=null==f[8]?r[8]:fa(f[8],r[8])),null==f[9]&&(f[9]=r[9]),f[0]=r[0],f[1]=d),b=
f[0],d=f[1],a=f[2],c=f[3],e=f[4],h=f[9]=null==f[9]?l?0:b.length:R(f[9]-m,0),!h&&24&d&&(d&=-25),l=d&&1!=d?8==d||16==d?Le(b,d,h):32!=d&&33!=d||e.length?Cb.apply(k,f):Me(b,d,a,c):Ke(b,d,a),(r?Bd:Ad)(l,f)}function De(b,d,a,c,e,f){var g=-1,h=2&e,l=1&e,m=b.length,q=d.length;if(!(m==q||h&&q>m))return!1;if(q=f.get(b))return q==d;q=!0;for(f.set(b,d);++g<m;){var p=b[g],r=d[g];if(c)var t=h?c(r,p,g,d,b,f):c(p,r,g,b,d,f);if(t!==k){if(t)continue;q=!1;break}if(l){if(!F(d,function(b){return p===b||a(p,b,c,e,f)})){q=
!1;break}}else if(p!==r&&!a(p,r,c,e,f)){q=!1;break}}return f["delete"](b),q}function Fe(b,d,a,c,e,f){switch(a){case "[object ArrayBuffer]":if(b.byteLength!=d.byteLength||!c(new Ab(b),new Ab(d)))break;return!0;case "[object Boolean]":case "[object Date]":return+b==+d;case "[object Error]":return b.name==d.name&&b.message==d.message;case "[object Number]":return b!=+b?d!=+d:b==+d;case "[object RegExp]":case "[object String]":return b==d+"";case "[object Map]":var g=Nb;case "[object Set]":return g||
(g=pb),(2&f||b.size==d.size)&&c(g(b),g(d),e,1|f);case "[object Symbol]":return!!wa&&nc.call(b)==nc.call(d)}return!1}function Ee(b,d,a,c,e,f){var g=2&e,h=T(b),l=h.length,m=T(d).length;if(l!=m&&!g)return!1;for(var q=l;q--;){var p=h[q];if(!(g?p in d:Zb(d,p)))return!1}if(m=f.get(b))return m==d;m=!0;f.set(b,d);for(var r=g;++q<l;){var p=h[q],t=b[p],u=d[p];if(c)var v=g?c(u,t,p,d,b,f):c(t,u,p,b,d,f);if(v===k?t!==u&&!a(t,u,c,e,f):!v){m=!1;break}r||(r="constructor"==p)}return m&&!r&&(a=b.constructor,c=d.constructor,
a!=c&&"constructor"in b&&"constructor"in d&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&(m=!1)),f["delete"](b),m}function Db(b){for(var d=b.name+"",a=jb[d],c=O.call(jb,d)?a.length:0;c--;){var e=a[c],f=e.func;if(null==f||f==b)return e.name}return d}function z(){var b=f.iteratee||oc,b=b===oc?Xc:b;return arguments.length?b(arguments[0],arguments[1]):b}function bc(b){b=Cd(b);for(var d=b.length;d--;){var a,c=b[d];a=b[d][1];a=a===a&&!N(a);c[2]=a}return b}function Gb(b,
d){var a=null==b?k:b[d];return Dd(a)?a:k}function Xa(b){return(O.call(f,"placeholder")?f:b).placeholder}function ja(b){return W.call(b)}function Ed(b,d,a){if(null==b)return!1;var c=a(b,d);return c||ta(d)||(d=Ga(d),b=hb(b,d),null!=b&&(d=V(d),c=a(b,d))),a=b?b.length:k,c||!!a&&kb(a)&&za(d,a)&&(B(b)||La(b)||Ia(b))}function ye(b){var d=b.length,a=b.constructor(d);return d&&"string"==typeof b[0]&&O.call(b,"index")&&(a.index=b.index,a.input=b.input),a}function Ae(b){return da(b.constructor)&&!pc(b)?Ta(vb(b)):
{}}function Be(b,d,a){var e=b.constructor;switch(d){case "[object ArrayBuffer]":return nd(b);case "[object Boolean]":case "[object Date]":return new e(+b);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return d=b.buffer,a=a?nd(d):d,new b.constructor(a,b.byteOffset,b.length);case "[object Map]":return a=
b.constructor,w(Nb(b),h,new a);case "[object Number]":case "[object String]":return new e(b);case "[object RegExp]":return a=new b.constructor(b.source,Fd.exec(b)),a.lastIndex=b.lastIndex,a;case "[object Set]":return a=b.constructor,w(pb(b),c,new a);case "[object Symbol]":return wa?Object(nc.call(b)):{}}}function Gd(b){var d=b?b.length:k;return kb(d)&&(B(b)||La(b)||Ia(b))?Oa(d,String):null}function la(b,d,a){if(!N(a))return!1;var c=typeof d;return("number"==c?ea(a)&&za(d,a.length):"string"==c&&d in
a)?ra(a[d],b):!1}function ta(b,d){return"number"==typeof b?!0:!B(b)&&(Ne.test(b)||!Oe.test(b)||null!=d&&b in Object(d))}function Qa(b){var d=typeof b;return"number"==d||"boolean"==d||"string"==d&&"__proto__"!=b||null==b}function kc(b){var d=Db(b),a=f[d];return"function"==typeof a&&d in C.prototype?b===a?!0:(d=jc(a),!!d&&b===d[0]):!1}function pc(b){var d=b&&b.constructor,d=da(d)&&d.prototype||Ra;return b===d}function Hd(b,d,a,c,e,f){return N(b)&&N(d)&&(f.set(d,b),wb(b,d,k,Hd,f)),b}function hb(b,d){return 1==
d.length?b:fb(b,ua(d,0,-1))}function Rc(b){var d=[];return E(b).replace(Pe,function(b,a,c,e){d.push(c?e.replace(Qe,"$1"):a||b)}),d}function Nc(b){if(b instanceof C)return b.clone();var d=new Z(b.__wrapped__,b.__chain__);return d.__actions__=U(b.__actions__),d.__index__=b.__index__,d.__values__=b.__values__,d}function Id(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:D(d),ua(b,0>d?0:d,c)):[]}function Jd(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:D(d),d=c-d,ua(b,0,0>d?0:d)):[]}function Kd(b){return b?
b[0]:k}function V(b){var d=b?b.length:0;return d?b[d-1]:k}function Ld(b,d){return b&&b.length&&d&&d.length?hd(b,d):b}function qc(b){return b?Re.call(b):b}function rc(b){if(!b||!b.length)return[];var d=0;return b=p(b,function(b){return Q(b)?(d=R(b.length,d),!0):void 0}),Oa(d,function(d){return m(b,dc(d))})}function Md(b,d){if(!b||!b.length)return[];var a=rc(b);return null==d?a:m(a,function(b){return g(d,k,b)})}function Nd(b){return b=f(b),b.__chain__=!0,b}function Hb(b,d){return d(b)}function Se(){return this}
function Od(b,d){return"function"==typeof d&&B(b)?e(b,d):sa(b,Fa(d))}function Pd(b,d){var a;if("function"==typeof d&&B(b)){for(a=b.length;a--&&!1!==d(b[a],a,b););a=b}else a=sc(b,Fa(d));return a}function Qd(b,d){return(B(b)?m:bd)(b,z(d,3))}function Rd(b,d){var a=-1,c=tc(b),e=c.length,f=e-1;for(d=Sa(D(d),0,e);++a<d;){var e=ec(a,f),g=c[e];c[e]=c[a];c[a]=g}return c.length=d,c}function Sd(b,d,a){return d=a?k:d,d=b&&null==d?b.length:d,va(b,128,k,k,k,k,d)}function Td(b,d){var a;if("function"!=typeof d)throw new ba("Expected a function");
return b=D(b),function(){return 0<--b&&(a=d.apply(this,arguments)),1>=b&&(d=k),a}}function Ud(b,d,a){return d=a?k:d,b=va(b,8,k,k,k,k,k,d),b.placeholder=Ud.placeholder,b}function Vd(b,d,a){return d=a?k:d,b=va(b,16,k,k,k,k,k,d),b.placeholder=Vd.placeholder,b}function Wd(b,d,a){function c(){t&&lb(t);m&&lb(m);v=0;l=m=r=t=u=k}function e(d,a){a&&lb(a);m=t=u=k;d&&(v=mb(),q=b.apply(r,l),t||m||(l=r=k))}function f(){var b=d-(mb()-p);0>=b||b>d?e(u,m):t=tb(f,b)}function g(){e(G,t)}function h(){if(l=arguments,
p=mb(),r=this,u=G&&(t||!w),!1===y)var a=w&&!t;else{v||m||w||(v=p);var c=y-(p-v),n=(0>=c||c>y)&&(w||m);n?(m&&(m=lb(m)),v=p,q=b.apply(r,l)):m||(m=tb(g,c))}return n&&t?t=lb(t):t||d===y||(t=tb(f,d)),a&&(n=!0,q=b.apply(r,l)),!n||t||m||(l=r=k),q}var l,m,q,p,r,t,u,v=0,w=!1,y=!1,G=!0;if("function"!=typeof b)throw new ba("Expected a function");return d=S(d)||0,N(a)&&(w=!!a.leading,y="maxWait"in a&&R(S(a.maxWait)||0,d),G="trailing"in a?!!a.trailing:G),h.cancel=c,h.flush=function(){return(t&&u||m&&G)&&(q=b.apply(r,
l)),c(),q},h}function uc(b,d){if("function"!=typeof b||d&&"function"!=typeof d)throw new ba("Expected a function");var a=function(){var c=arguments,e=d?d.apply(this,c):c[0],f=a.cache;return f.has(e)?f.get(e):(c=b.apply(this,c),a.cache=f.set(e,c),c)};return a.cache=new uc.Cache,a}function x(b,d){if("function"!=typeof b)throw new ba("Expected a function");return d=R(d===k?b.length-1:D(d),0),function(){for(var a=arguments,c=-1,e=R(a.length-d,0),f=Array(e);++c<e;)f[c]=a[d+c];switch(d){case 0:return b.call(this,
f);case 1:return b.call(this,a[0],f);case 2:return b.call(this,a[0],a[1],f)}e=Array(d+1);for(c=-1;++c<d;)e[c]=a[c];return e[d]=f,g(b,this,e)}}function ra(b,d){return b===d||b!==b&&d!==d}function vc(b,d){return b>d}function Ia(b){return Q(b)&&O.call(b,"callee")&&(!Xd.call(b,"callee")||"[object Arguments]"==W.call(b))}function ea(b){return null!=b&&!("function"==typeof b&&da(b))&&kb(Te(b))}function Q(b){return P(b)&&ea(b)}function wc(b){return P(b)?"[object Error]"==W.call(b)||"string"==typeof b.message&&
"string"==typeof b.name:!1}function da(b){return b=N(b)?W.call(b):"","[object Function]"==b||"[object GeneratorFunction]"==b}function Yd(b){return"number"==typeof b&&b==D(b)}function kb(b){return"number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b}function N(b){var d=typeof b;return!!b&&("object"==d||"function"==d)}function P(b){return!!b&&"object"==typeof b}function Dd(b){return null==b?!1:da(b)?Zd.test(Ca.call(b)):P(b)&&(bb(b)?Zd:Ue).test(b)}function $d(b){return"number"==typeof b||P(b)&&"[object Number]"==
W.call(b)}function cc(b){return!P(b)||"[object Object]"!=W.call(b)||bb(b)?!1:(b=vb(b),null===b?!0:(b=b.constructor,"function"==typeof b&&b instanceof b&&Ca.call(b)==Ve))}function ae(b){return N(b)&&"[object RegExp]"==W.call(b)}function La(b){return"string"==typeof b||!B(b)&&P(b)&&"[object String]"==W.call(b)}function be(b){return"symbol"==typeof b||P(b)&&"[object Symbol]"==W.call(b)}function Ua(b){return P(b)&&kb(b.length)&&!!K[W.call(b)]}function xc(b,d){return d>b}function tc(b){if(!b)return[];
if(ea(b))return La(b)?b.match(aa):U(b);if(Ma&&b[Ma])return Lc(b[Ma]());var d=ja(b);return("[object Map]"==d?Nb:"[object Set]"==d?pb:Ib)(b)}function D(b){if(!b)return 0===b?b:0;if(b=S(b),b===Jb||b===-Jb)return 1.7976931348623157E308*(0>b?-1:1);var d=b%1;return b===b?d?b-d:b:0}function ce(b){return b?Sa(D(b),0,4294967295):0}function S(b){if(N(b)&&(b=da(b.valueOf)?b.valueOf():b,b=N(b)?b+"":b),"string"!=typeof b)return 0===b?b:+b;b=b.replace(yc,"");var d=We.test(b);return d||Xe.test(b)?Ye(b.slice(2),
d?2:8):Ze.test(b)?$e:+b}function dd(b){return eb(b,ca(b))}function E(b){if("string"==typeof b)return b;if(null==b)return"";if(be(b))return wa?af.call(b):"";var d=b+"";return"0"==d&&1/b==-Jb?"-0":d}function fb(b,d,a){return b=null==b?k:Yb(b,d),b===k?a:b}function de(b,d){return Ed(b,d,Zb)}function cd(b,d){return Ed(b,d,Sb)}function T(b){var d=pc(b);if(!d&&!ea(b))return bf(Object(b));var a,c=Gd(b),e=!!c,c=c||[],f=c.length;for(a in b)!Zb(b,a)||e&&("length"==a||za(a,f))||d&&"constructor"==a||c.push(a);
return c}function ca(b){for(var d=-1,a=pc(b),c=ad(b),e=c.length,f=Gd(b),g=!!f,f=f||[],h=f.length;++d<e;){var l=c[d];g&&("length"==l||za(l,h))||"constructor"==l&&(a||!O.call(b,l))||f.push(l)}return f}function Cd(b){return Y(b,T(b))}function Ib(b){return b?ya(b,T(b)):[]}function zc(b){return ee(E(b).toLowerCase())}function ud(b){return(b=E(b))&&b.replace(cf,te).replace(df,"")}function yd(b,d){b=E(b);d=D(d);var a="";if(!b||1>d||9007199254740991<d)return a;do d%2&&(a+=b),d=xb(d/2),b+=b;while(d);return a}
function td(b,d,a){return b=E(b),d=a?k:d,d===k&&(d=ef.test(b)?ff:gf),b.match(d)||[]}function Ac(b){return function(){return b}}function ha(b){return b}function oc(b){return Xc("function"==typeof b?b:ia(b,!0))}function Bc(b,d,a){var c=T(d),f=ub(d,c);null!=a||N(d)&&(f.length||!c.length)||(a=d,d=b,b=this,f=ub(d,T(d)));var g=N(a)&&"chain"in a?a.chain:!0,h=da(b);return e(f,function(a){var c=d[a];b[a]=c;h&&(b.prototype[a]=function(){var d=this.__chain__;if(g||d){var a=b(this.__wrapped__);return(a.__actions__=
U(this.__actions__)).push({func:c,args:arguments,thisArg:b}),a.__chain__=d,a}return c.apply(b,r([this.value()],arguments))})}),b}function Cc(){}function $c(b){return ta(b)?dc(b):Ge(b)}function fe(b){return b&&b.length?Ea(b,ha):0}M=M?Da.defaults({},M,Da.pick(ma,hf)):ma;var jf=M.Date,kf=M.Error,Ya=M.Math,Dc=M.RegExp,ba=M.TypeError,Kb=M.Array.prototype,Ra=M.Object.prototype,Ca=M.Function.prototype.toString,O=Ra.hasOwnProperty,lf=0,Ve=Ca.call(Object),W=Ra.toString,mf=ma._,Zd=Dc("^"+Ca.call(O).replace(Ec,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ge?M.Buffer:k,ie=M.Reflect,wa=M.Symbol,Ab=M.Uint8Array,lb=M.clearTimeout,je=ie?ie.enumerate:k,vb=Object.getPrototypeOf,nf=Object.getOwnPropertySymbols,Ma="symbol"==typeof(Ma=wa&&wa.iterator)?Ma:k,Ce=Object.create,Xd=Ra.propertyIsEnumerable,tb=M.setTimeout,rb=Kb.splice,Fb=Ya.ceil,xb=Ya.floor,of=M.isFinite,pf=Kb.join,bf=Object.keys,R=Ya.max,fa=Ya.min,qf=M.parseInt,jd=Ya.random,Re=Kb.reverse,na=Gb(M,"Map"),Na=Gb(M,
"Set"),Za=Gb(M,"WeakMap"),$a=Gb(Object,"create"),Lb=Za&&new Za,rf=na?Ca.call(na):"",sf=Na?Ca.call(Na):"",tf=Za?Ca.call(Za):"",ke=wa?wa.prototype:k,nc=wa?ke.valueOf:k,af=wa?ke.toString:k,jb={};f.templateSettings={escape:uf,evaluate:vf,interpolate:le,variable:"",imports:{_:f}};var sa=qd(ka),sc=qd(Xb,!0),Wb=rd(),Wc=rd(!0);je&&!Xd.call({valueOf:1},"valueOf")&&(ad=function(b){return Lc(je(b))});var Bd=Lb?function(b,d){return Lb.set(b,d),b}:ha,Ie=Na&&2===(new Na([1,2])).size?function(b){return new Na(b)}:
Cc,jc=Lb?function(b){return Lb.get(b)}:Cc,Te=dc("length"),Je=nf||function(){return[]};(na&&"[object Map]"!=ja(new na)||Na&&"[object Set]"!=ja(new Na)||Za&&"[object WeakMap]"!=ja(new Za))&&(ja=function(b){var d=W.call(b);if(b="[object Object]"==d?b.constructor:null,b="function"==typeof b?Ca.call(b):"")switch(b){case rf:return"[object Map]";case sf:return"[object Set]";case tf:return"[object WeakMap]"}return d});var Ad=function(){var b=0,d=0;return function(a,c){var e=mb(),f=16-(e-d);if(d=e,0<f){if(150<=
++b)return a}else b=0;return Bd(a,c)}}(),wf=x(function(b,d){B(b)||(b=null==b?[]:[Object(b)]);d=L(d,1);for(var a=b,c=d,e=-1,f=a.length,g=-1,h=c.length,l=Array(f+h);++e<f;)l[e]=a[e];for(;++g<h;)l[e++]=c[g];return l}),xf=x(function(b,d){return Q(b)?Ha(b,L(d,1,!0)):[]}),yf=x(function(b,d){var a=V(d);return Q(a)&&(a=k),Q(b)?Ha(b,L(d,1,!0),z(a)):[]}),zf=x(function(b,d){var a=V(d);return Q(a)&&(a=k),Q(b)?Ha(b,L(d,1,!0),k,a):[]}),Af=x(function(b){var d=m(b,Vb);return d.length&&d[0]===b[0]?$b(d):[]}),Bf=x(function(b){var d=
V(b),a=m(b,Vb);return d===V(a)?d=k:a.pop(),a.length&&a[0]===b[0]?$b(a,z(d)):[]}),Cf=x(function(b){var d=V(b),a=m(b,Vb);return d===V(a)?d=k:a.pop(),a.length&&a[0]===b[0]?$b(a,k,d):[]}),Df=x(Ld),Ef=x(function(b,d){d=m(L(d,1),String);var a=Ub(b,d);return id(b,d.sort(Jc)),a}),Ff=x(function(b){return Ka(L(b,1,!0))}),Gf=x(function(b){var d=V(b);return Q(d)&&(d=k),Ka(L(b,1,!0),z(d))}),Hf=x(function(b){var d=V(b);return Q(d)&&(d=k),Ka(L(b,1,!0),k,d)}),If=x(function(b,d){return Q(b)?Ha(b,d):[]}),Jf=x(function(b){return hc(p(b,
Q))}),Kf=x(function(b){var d=V(b);return Q(d)&&(d=k),hc(p(b,Q),z(d))}),Lf=x(function(b){var d=V(b);return Q(d)&&(d=k),hc(p(b,Q),k,d)}),Mf=x(rc),Nf=x(function(b){var d=b.length,d=1<d?b[d-1]:k,d="function"==typeof d?(b.pop(),d):k;return Md(b,d)}),Of=x(function(b){b=L(b,1);var d=b.length,a=d?b[0]:0,c=this.__wrapped__,e=function(d){return Ub(d,b)};return 1>=d&&!this.__actions__.length&&c instanceof C&&za(a)?(c=c.slice(a,+a+(d?1:0)),c.__actions__.push({func:Hb,args:[e],thisArg:k}),(new Z(c,this.__chain__)).thru(function(b){return d&&
!b.length&&b.push(k),b})):this.thru(e)}),Pf=Bb(function(b,d,a){O.call(b,a)?++b[a]:b[a]=1}),Qf=Bb(function(b,d,a){O.call(b,a)?b[a].push(d):b[a]=[d]}),Rf=x(function(b,d,a){var c=-1,e="function"==typeof d,f=ta(d),h=ea(b)?Array(b.length):[];return sa(b,function(b){var l=e?d:f&&null!=b?b[d]:k;h[++c]=l?g(l,b,a):gb(b,d,a)}),h}),Sf=Bb(function(b,d,a){b[a]=d}),Tf=Bb(function(b,d,a){b[a?0:1].push(d)},function(){return[[],[]]}),Uf=x(function(b,d){if(null==b)return[];var a=d.length;return 1<a&&la(b,d[0],d[1])?
d=[]:2<a&&la(d[0],d[1],d[2])&&(d.length=1),ed(b,L(d,1),[])}),mb=jf.now,Fc=x(function(b,d,a){var c=1;if(a.length)var e=Aa(a,Xa(Fc)),c=32|c;return va(b,c,d,a,e)}),me=x(function(b,d,a){var c=3;if(a.length)var e=Aa(a,Xa(me)),c=32|c;return va(d,c,b,a,e)}),Vf=x(function(b,d){return Uc(b,1,d)}),Wf=x(function(b,d,a){return Uc(b,S(d)||0,a)}),Xf=x(function(b,d){d=m(L(d,1),z());var a=d.length;return x(function(c){for(var e=-1,f=fa(c.length,a);++e<f;)c[e]=d[e].call(this,c[e]);return g(b,this,c)})}),Gc=x(function(b,
d){var a=Aa(d,Xa(Gc));return va(b,32,k,d,a)}),ne=x(function(b,d){var a=Aa(d,Xa(ne));return va(b,64,k,d,a)}),Yf=x(function(b,d){return va(b,256,k,k,k,L(d,1))}),B=Array.isArray,Sc=he?function(b){return b instanceof he}:Ac(!1),Zf=Va(function(b,d){eb(d,T(d),b)}),oe=Va(function(b,d){eb(d,ca(d),b)}),nb=Va(function(b,d,a,c){ic(d,ca(d),b,c)}),$f=Va(function(b,d,a,c){ic(d,T(d),b,c)}),ag=x(function(b,d){return Ub(b,L(d,1))}),bg=x(function(b){return b.push(k,Tb),g(nb,k,b)}),cg=x(function(b){return b.push(k,
Hd),g(pe,k,b)}),dg=xd(function(b,d,a){b[d]=a},Ac(ha)),eg=xd(function(b,d,a){O.call(b,d)?b[d].push(a):b[d]=[a]},z),fg=x(gb),gg=Va(function(b,d,a){wb(b,d,a)}),pe=Va(function(b,d,a,c){wb(b,d,a,c)}),hg=x(function(b,d){return null==b?{}:(d=m(L(d,1),String),fd(b,Ha(ca(b),d)))}),ig=x(function(b,d){return null==b?{}:fd(b,L(d,1))}),jg=Wa(function(b,d,a){return d=d.toLowerCase(),b+(a?zc(d):d)}),kg=Wa(function(b,d,a){return b+(a?"-":"")+d.toLowerCase()}),lg=Wa(function(b,d,a){return b+(a?" ":"")+d.toLowerCase()}),
mg=sd("toLowerCase"),ee=sd("toUpperCase"),ng=Wa(function(b,d,a){return b+(a?"_":"")+d.toLowerCase()}),og=Wa(function(b,d,a){return b+(a?" ":"")+zc(d)}),pg=Wa(function(b,d,a){return b+(a?" ":"")+d.toUpperCase()}),qe=x(function(b,d){try{return g(b,k,d)}catch(a){return wc(a)?a:new kf(a)}}),qg=x(function(b,d){return e(L(d,1),function(d){b[d]=Fc(b[d],b)}),b}),rg=wd(),sg=wd(!0),tg=x(function(b,d){return function(a){return gb(a,b,d)}}),ug=x(function(b,d){return function(a){return gb(b,a,d)}}),vg=lc(m),wg=
lc(u),xg=lc(F),yg=zd(),zg=zd(!0),Ag=mc("ceil"),Bg=mc("floor"),Cg=mc("round");return f.prototype=X.prototype,Z.prototype=Ta(X.prototype),Z.prototype.constructor=Z,C.prototype=Ta(X.prototype),C.prototype.constructor=C,xa.prototype=$a?$a(null):Ra,Ba.prototype.clear=function(){this.__data__={hash:new xa,map:na?new na:[],string:new xa}},Ba.prototype["delete"]=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,($a?d[b]!==k:O.call(d,b))&&delete d[b]):na?d.map["delete"](b):
ab(d.map,b)},Ba.prototype.get=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,$a?(b=d[b],b="__lodash_hash_undefined__"===b?k:b):b=O.call(d,b)?d[b]:k,b):na?d.map.get(b):ob(d.map,b)},Ba.prototype.has=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,b=$a?d[b]!==k:O.call(d,b)):b=na?d.map.has(b):-1<db(d.map,b),b},Ba.prototype.set=function(b,d){var a=this.__data__;return Qa(b)?("string"==typeof b?a.string:a.hash)[b]=$a&&d===k?"__lodash_hash_undefined__":
d:na?a.map.set(b,d):Oc(a.map,b,d),this},oa.prototype.push=function(b){var d=this.__data__;Qa(b)?(d=d.__data__,("string"==typeof b?d.string:d.hash)[b]="__lodash_hash_undefined__"):d.set(b,"__lodash_hash_undefined__")},qa.prototype.clear=function(){this.__data__={array:[],map:null}},qa.prototype["delete"]=function(b){var d=this.__data__,a=d.array;return a?ab(a,b):d.map["delete"](b)},qa.prototype.get=function(b){var d=this.__data__,a=d.array;return a?ob(a,b):d.map.get(b)},qa.prototype.has=function(b){var d=
this.__data__,a=d.array;return a?-1<db(a,b):d.map.has(b)},qa.prototype.set=function(b,d){var a=this.__data__,c=a.array;return c&&(199>c.length?Oc(c,b,d):(a.array=null,a.map=new Ba(c))),(a=a.map)&&a.set(b,d),this},uc.Cache=Ba,f.after=function(b,d){if("function"!=typeof d)throw new ba("Expected a function");return b=D(b),function(){return 1>--b?d.apply(this,arguments):void 0}},f.ary=Sd,f.assign=Zf,f.assignIn=oe,f.assignInWith=nb,f.assignWith=$f,f.at=ag,f.before=Td,f.bind=Fc,f.bindAll=qg,f.bindKey=me,
f.castArray=function(){if(!arguments.length)return[];var b=arguments[0];return B(b)?b:[b]},f.chain=Nd,f.chunk=function(b,d){d=R(D(d),0);var a=b?b.length:0;if(!a||1>d)return[];for(var c=0,e=-1,f=Array(Fb(a/d));a>c;)f[++e]=ua(b,c,c+=d);return f},f.compact=function(b){for(var d=-1,a=b?b.length:0,c=-1,e=[];++d<a;){var f=b[d];f&&(e[++c]=f)}return e},f.concat=wf,f.cond=function(b){var d=b?b.length:0,a=z();return b=d?m(b,function(b){if("function"!=typeof b[1])throw new ba("Expected a function");return[a(b[0]),
b[1]]}):[],x(function(a){for(var c=-1;++c<d;){var e=b[c];if(g(e[0],this,a))return g(e[1],this,a)}})},f.conforms=function(b){return Pb(ia(b,!0))},f.constant=Ac,f.countBy=Pf,f.create=function(b,d){var a=Ta(b);return d?Qc(a,d):a},f.curry=Ud,f.curryRight=Vd,f.debounce=Wd,f.defaults=bg,f.defaultsDeep=cg,f.defer=Vf,f.delay=Wf,f.difference=xf,f.differenceBy=yf,f.differenceWith=zf,f.drop=Id,f.dropRight=Jd,f.dropRightWhile=function(b,d){return b&&b.length?zb(b,z(d,3),!0,!0):[]},f.dropWhile=function(b,d){return b&&
b.length?zb(b,z(d,3),!0):[]},f.fill=function(b,d,a,c){var e=b?b.length:0;if(!e)return[];a&&"number"!=typeof a&&la(b,d,a)&&(a=0,c=e);e=b.length;a=D(a);0>a&&(a=-a>e?0:e+a);c=c===k||c>e?e:D(c);0>c&&(c+=e);for(c=a>c?0:ce(c);c>a;)b[a++]=d;return b},f.filter=function(b,d){return(B(b)?p:Vc)(b,z(d,3))},f.flatMap=function(b,d){return L(Qd(b,d),1)},f.flatten=function(b){return b&&b.length?L(b,1):[]},f.flattenDeep=function(b){return b&&b.length?L(b,Jb):[]},f.flattenDepth=function(b,d){return b&&b.length?(d=
d===k?1:D(d),L(b,d)):[]},f.flip=function(b){return va(b,512)},f.flow=rg,f.flowRight=sg,f.fromPairs=function(b){for(var d=-1,a=b?b.length:0,c={};++d<a;){var e=b[d];c[e[0]]=e[1]}return c},f.functions=function(b){return null==b?[]:ub(b,T(b))},f.functionsIn=function(b){return null==b?[]:ub(b,ca(b))},f.groupBy=Qf,f.initial=function(b){return Jd(b,1)},f.intersection=Af,f.intersectionBy=Bf,f.intersectionWith=Cf,f.invert=dg,f.invertBy=eg,f.invokeMap=Rf,f.iteratee=oc,f.keyBy=Sf,f.keys=T,f.keysIn=ca,f.map=
Qd,f.mapKeys=function(b,d){var a={};return d=z(d,3),ka(b,function(b,c,e){a[d(b,c,e)]=b}),a},f.mapValues=function(b,d){var a={};return d=z(d,3),ka(b,function(b,c,e){a[c]=d(b,c,e)}),a},f.matches=function(b){return Zc(ia(b,!0))},f.matchesProperty=function(b,d){return Yc(b,ia(d,!0))},f.memoize=uc,f.merge=gg,f.mergeWith=pe,f.method=tg,f.methodOf=ug,f.mixin=Bc,f.negate=function(b){if("function"!=typeof b)throw new ba("Expected a function");return function(){return!b.apply(this,arguments)}},f.nthArg=function(b){return b=
D(b),function(){return arguments[b]}},f.omit=hg,f.omitBy=function(b,d){return d=z(d),gd(b,function(b,a){return!d(b,a)})},f.once=function(b){return Td(2,b)},f.orderBy=function(b,d,a,c){return null==b?[]:(B(d)||(d=null==d?[]:[d]),a=c?k:a,B(a)||(a=null==a?[]:[a]),ed(b,d,a))},f.over=vg,f.overArgs=Xf,f.overEvery=wg,f.overSome=xg,f.partial=Gc,f.partialRight=ne,f.partition=Tf,f.pick=ig,f.pickBy=function(b,d){return null==b?{}:gd(b,z(d))},f.property=$c,f.propertyOf=function(b){return function(d){return null==
b?k:Yb(b,d)}},f.pull=Df,f.pullAll=Ld,f.pullAllBy=function(b,d,a){return b&&b.length&&d&&d.length?hd(b,d,z(a)):b},f.pullAt=Ef,f.range=yg,f.rangeRight=zg,f.rearg=Yf,f.reject=function(b,d){var a=B(b)?p:Vc;return d=z(d,3),a(b,function(b,a,c){return!d(b,a,c)})},f.remove=function(b,d){var a=[];if(!b||!b.length)return a;var c=-1,e=[],f=b.length;for(d=z(d,3);++c<f;){var g=b[c];d(g,c,b)&&(a.push(g),e.push(c))}return id(b,e),a},f.rest=x,f.reverse=qc,f.sampleSize=Rd,f.set=function(b,d,a){return null==b?b:fc(b,
d,a)},f.setWith=function(b,d,a,c){return c="function"==typeof c?c:k,null==b?b:fc(b,d,a,c)},f.shuffle=function(b){return Rd(b,4294967295)},f.slice=function(b,d,a){var c=b?b.length:0;return c?(a&&"number"!=typeof a&&la(b,d,a)?(d=0,a=c):(d=null==d?0:D(d),a=a===k?c:D(a)),ua(b,d,a)):[]},f.sortBy=Uf,f.sortedUniq=function(b){return b&&b.length?kd(b):[]},f.sortedUniqBy=function(b,d){return b&&b.length?kd(b,z(d)):[]},f.split=function(b,d,a){return E(b).split(d,a)},f.spread=function(b,d){if("function"!=typeof b)throw new ba("Expected a function");
return d=d===k?0:R(D(d),0),x(function(a){var c=a[d];return a=a.slice(0,d),c&&r(a,c),g(b,this,a)})},f.tail=function(b){return Id(b,1)},f.take=function(b,d,a){return b&&b.length?(d=a||d===k?1:D(d),ua(b,0,0>d?0:d)):[]},f.takeRight=function(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:D(d),d=c-d,ua(b,0>d?0:d,c)):[]},f.takeRightWhile=function(b,d){return b&&b.length?zb(b,z(d,3),!1,!0):[]},f.takeWhile=function(b,d){return b&&b.length?zb(b,z(d,3)):[]},f.tap=function(b,d){return d(b),b},f.throttle=function(b,
d,a){var c=!0,e=!0;if("function"!=typeof b)throw new ba("Expected a function");return N(a)&&(c="leading"in a?!!a.leading:c,e="trailing"in a?!!a.trailing:e),Wd(b,d,{leading:c,maxWait:d,trailing:e})},f.thru=Hb,f.toArray=tc,f.toPairs=Cd,f.toPairsIn=function(b){return Y(b,ca(b))},f.toPath=function(b){return B(b)?m(b,String):Rc(b)},f.toPlainObject=dd,f.transform=function(b,a,c){var f=B(b)||Ua(b);if(a=z(a,4),null==c)if(f||N(b)){var g=b.constructor;c=f?B(b)?new g:[]:da(g)?Ta(vb(b)):{}}else c={};return(f?
e:ka)(b,function(b,e,f){return a(c,b,e,f)}),c},f.unary=function(b){return Sd(b,1)},f.union=Ff,f.unionBy=Gf,f.unionWith=Hf,f.uniq=function(b){return b&&b.length?Ka(b):[]},f.uniqBy=function(b,a){return b&&b.length?Ka(b,z(a)):[]},f.uniqWith=function(b,a){return b&&b.length?Ka(b,k,a):[]},f.unset=function(b,a){var c;if(null==b)c=!0;else{c=b;var e=a,e=ta(e,c)?[e+""]:Ga(e);c=hb(c,e);e=V(e);c=null!=c&&de(c,e)?delete c[e]:!0}return c},f.unzip=rc,f.unzipWith=Md,f.values=Ib,f.valuesIn=function(b){return null==
b?[]:ya(b,ca(b))},f.without=If,f.words=td,f.wrap=function(b,a){return a=null==a?ha:a,Gc(a,b)},f.xor=Jf,f.xorBy=Kf,f.xorWith=Lf,f.zip=Mf,f.zipObject=function(b,a){return md(b||[],a||[],sb)},f.zipObjectDeep=function(b,a){return md(b||[],a||[],fc)},f.zipWith=Nf,f.extend=oe,f.extendWith=nb,Bc(f,f),f.add=function(b,a){var c;return b===k&&a===k?0:(b!==k&&(c=b),a!==k&&(c=c===k?a:c+a),c)},f.attempt=qe,f.camelCase=jg,f.capitalize=zc,f.ceil=Ag,f.clamp=function(b,a,c){return c===k&&(c=a,a=k),c!==k&&(c=S(c),
c=c===c?c:0),a!==k&&(a=S(a),a=a===a?a:0),Sa(S(b),a,c)},f.clone=function(b){return ia(b)},f.cloneDeep=function(b){return ia(b,!0)},f.cloneDeepWith=function(b,a){return ia(b,!0,a)},f.cloneWith=function(b,a){return ia(b,!1,a)},f.deburr=ud,f.endsWith=function(b,a,c){b=E(b);a="string"==typeof a?a:a+"";var e=b.length;return c=c===k?e:Sa(D(c),0,e),c-=a.length,0<=c&&b.indexOf(a,c)==c},f.eq=ra,f.escape=function(b){return(b=E(b))&&Dg.test(b)?b.replace(re,ue):b},f.escapeRegExp=function(b){return(b=E(b))&&Eg.test(b)?
b.replace(Ec,"\\$&"):b},f.every=function(b,a,c){var e=B(b)?u:Qb;return c&&la(b,a,c)&&(a=k),e(b,z(a,3))},f.find=function(b,a){if(a=z(a,3),B(b)){var c=y(b,a);return-1<c?b[c]:k}return t(b,a,sa)},f.findIndex=function(b,a){return b&&b.length?y(b,z(a,3)):-1},f.findKey=function(b,a){return t(b,z(a,3),ka,!0)},f.findLast=function(b,a){if(a=z(a,3),B(b)){var c=y(b,a,!0);return-1<c?b[c]:k}return t(b,a,sc)},f.findLastIndex=function(b,a){return b&&b.length?y(b,z(a,3),!0):-1},f.findLastKey=function(b,a){return t(b,
z(a,3),Xb,!0)},f.floor=Bg,f.forEach=Od,f.forEachRight=Pd,f.forIn=function(b,a){return null==b?b:Wb(b,Fa(a),ca)},f.forInRight=function(b,a){return null==b?b:Wc(b,Fa(a),ca)},f.forOwn=function(b,a){return b&&ka(b,Fa(a))},f.forOwnRight=function(b,a){return b&&Xb(b,Fa(a))},f.get=fb,f.gt=vc,f.gte=function(b,a){return b>=a},f.has=de,f.hasIn=cd,f.head=Kd,f.identity=ha,f.includes=function(b,a,c,e){return b=ea(b)?b:Ib(b),c=c&&!e?D(c):0,e=b.length,0>c&&(c=R(e+c,0)),La(b)?e>=c&&-1<b.indexOf(a,c):!!e&&-1<q(b,
a,c)},f.indexOf=function(b,a,c){var e=b?b.length:0;return e?(c=D(c),0>c&&(c=R(e+c,0)),q(b,a,c)):-1},f.inRange=function(b,a,c){return a=S(a)||0,c===k?(c=a,a=0):c=S(c)||0,b=S(b),b>=fa(a,c)&&b<R(a,c)},f.invoke=fg,f.isArguments=Ia,f.isArray=B,f.isArrayBuffer=function(b){return P(b)&&"[object ArrayBuffer]"==W.call(b)},f.isArrayLike=ea,f.isArrayLikeObject=Q,f.isBoolean=function(b){return!0===b||!1===b||P(b)&&"[object Boolean]"==W.call(b)},f.isBuffer=Sc,f.isDate=function(b){return P(b)&&"[object Date]"==
W.call(b)},f.isElement=function(b){return!!b&&1===b.nodeType&&P(b)&&!cc(b)},f.isEmpty=function(b){if(ea(b)&&(B(b)||La(b)||da(b.splice)||Ia(b)))return!b.length;for(var a in b)if(O.call(b,a))return!1;return!0},f.isEqual=function(b,a){return Ja(b,a)},f.isEqualWith=function(b,a,c){var e=(c="function"==typeof c?c:k)?c(b,a):k;return e===k?Ja(b,a,c):!!e},f.isError=wc,f.isFinite=function(b){return"number"==typeof b&&of(b)},f.isFunction=da,f.isInteger=Yd,f.isLength=kb,f.isMap=function(b){return P(b)&&"[object Map]"==
ja(b)},f.isMatch=function(b,a){return b===a||ac(b,a,bc(a))},f.isMatchWith=function(b,a,c){return c="function"==typeof c?c:k,ac(b,a,bc(a),c)},f.isNaN=function(b){return $d(b)&&b!=+b},f.isNative=Dd,f.isNil=function(b){return null==b},f.isNull=function(b){return null===b},f.isNumber=$d,f.isObject=N,f.isObjectLike=P,f.isPlainObject=cc,f.isRegExp=ae,f.isSafeInteger=function(b){return Yd(b)&&-9007199254740991<=b&&9007199254740991>=b},f.isSet=function(b){return P(b)&&"[object Set]"==ja(b)},f.isString=La,
f.isSymbol=be,f.isTypedArray=Ua,f.isUndefined=function(b){return b===k},f.isWeakMap=function(b){return P(b)&&"[object WeakMap]"==ja(b)},f.isWeakSet=function(b){return P(b)&&"[object WeakSet]"==W.call(b)},f.join=function(b,a){return b?pf.call(b,a):""},f.kebabCase=kg,f.last=V,f.lastIndexOf=function(b,a,c){var e=b?b.length:0;if(!e)return-1;var f=e;if(c!==k&&(f=D(c),f=(0>f?R(e+f,0):fa(f,e-1))+1),a!==a)return Kc(b,f,!0);for(;f--;)if(b[f]===a)return f;return-1},f.lowerCase=lg,f.lowerFirst=mg,f.lt=xc,f.lte=
function(b,a){return a>=b},f.max=function(b){return b&&b.length?A(b,ha,vc):k},f.maxBy=function(b,a){return b&&b.length?A(b,z(a),vc):k},f.mean=function(b){return fe(b)/(b?b.length:0)},f.min=function(b){return b&&b.length?A(b,ha,xc):k},f.minBy=function(b,a){return b&&b.length?A(b,z(a),xc):k},f.noConflict=function(){return ma._===this&&(ma._=mf),this},f.noop=Cc,f.now=mb,f.pad=function(b,a,c){b=E(b);a=D(a);var e=cb(b);return a&&a>e?(e=(a-e)/2,a=xb(e),e=Fb(e),Eb("",a,c)+b+Eb("",e,c)):b},f.padEnd=function(b,
a,c){return b=E(b),b+Eb(b,a,c)},f.padStart=function(b,a,c){return b=E(b),Eb(b,a,c)+b},f.parseInt=function(b,a,c){return c||null==a?a=0:a&&(a=+a),b=E(b).replace(yc,""),qf(b,a||(Fg.test(b)?16:10))},f.random=function(b,a,c){if(c&&"boolean"!=typeof c&&la(b,a,c)&&(a=c=k),c===k&&("boolean"==typeof a?(c=a,a=k):"boolean"==typeof b&&(c=b,b=k)),b===k&&a===k?(b=0,a=1):(b=S(b)||0,a===k?(a=b,b=0):a=S(a)||0),b>a){var e=b;b=a;a=e}return c||b%1||a%1?(c=jd(),fa(b+c*(a-b+Gg("1e-"+((c+"").length-1))),a)):ec(b,a)},f.reduce=
function(b,a,c){var e=B(b)?w:H,f=3>arguments.length;return e(b,z(a,4),c,f,sa)},f.reduceRight=function(b,a,c){var e=B(b)?J:H,f=3>arguments.length;return e(b,z(a,4),c,f,sc)},f.repeat=yd,f.replace=function(){var b=arguments,a=E(b[0]);return 3>b.length?a:a.replace(b[1],b[2])},f.result=function(b,a,c){if(ta(a,b))e=null==b?k:b[a];else{a=Ga(a);var e=fb(b,a);b=hb(b,a)}return e===k&&(e=c),da(e)?e.call(b):e},f.round=Cg,f.runInContext=Mc,f.sample=function(b){b=ea(b)?b:Ib(b);var a=b.length;return 0<a?b[ec(0,
a-1)]:k},f.size=function(b){if(null==b)return 0;if(ea(b)){var a=b.length;return a&&La(b)?cb(b):a}return T(b).length},f.snakeCase=ng,f.some=function(b,a,c){var e=B(b)?F:He;return c&&la(b,a,c)&&(a=k),e(b,z(a,3))},f.sortedIndex=function(b,a){return yb(b,a)},f.sortedIndexBy=function(b,a,c){return gc(b,a,z(c))},f.sortedIndexOf=function(b,a){var c=b?b.length:0;if(c){var e=yb(b,a);if(c>e&&ra(b[e],a))return e}return-1},f.sortedLastIndex=function(b,a){return yb(b,a,!0)},f.sortedLastIndexBy=function(b,a,c){return gc(b,
a,z(c),!0)},f.sortedLastIndexOf=function(b,a){if(b&&b.length){var c=yb(b,a,!0)-1;if(ra(b[c],a))return c}return-1},f.startCase=og,f.startsWith=function(b,a,c){return b=E(b),c=Sa(D(c),0,b.length),b.lastIndexOf(a,c)==c},f.subtract=function(b,a){var c;return b===k&&a===k?0:(b!==k&&(c=b),a!==k&&(c=c===k?a:c-a),c)},f.sum=fe,f.sumBy=function(b,a){return b&&b.length?Ea(b,z(a)):0},f.template=function(b,a,c){var e=f.templateSettings;c&&la(b,a,c)&&(a=k);b=E(b);a=nb({},a,e,Tb);c=nb({},a.imports,e.imports,Tb);
var g,h,l=T(c),m=ya(c,l),q=0;c=a.interpolate||Mb;var p="__p+='";c=Dc((a.escape||Mb).source+"|"+c.source+"|"+(c===le?Hg:Mb).source+"|"+(a.evaluate||Mb).source+"|$","g");var r="sourceURL"in a?"//# sourceURL="+a.sourceURL+"\n":"";if(b.replace(c,function(a,d,c,e,f,l){return c||(c=e),p+=b.slice(q,l).replace(Ig,ve),d&&(g=!0,p+="'+__e("+d+")+'"),f&&(h=!0,p+="';"+f+";\n__p+='"),c&&(p+="'+((__t=("+c+"))==null?'':__t)+'"),q=l+a.length,a}),p+="';",(a=a.variable)||(p="with(obj){"+p+"}"),p=(h?p.replace(Jg,""):
p).replace(Kg,"$1").replace(Lg,"$1;"),p="function("+(a||"obj")+"){"+(a?"":"obj||(obj={});")+"var __t,__p=''"+(g?",__e=_.escape":"")+(h?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}",a=qe(function(){return Function(l,r+"return "+p).apply(k,m)}),a.source=p,wc(a))throw a;return a},f.times=function(b,a){if(b=D(b),1>b||9007199254740991<b)return[];var c=4294967295,e=fa(b,4294967295);a=Fa(a);b-=4294967295;for(e=Oa(e,a);++c<b;)a(c);return e},f.toInteger=D,f.toLength=
ce,f.toLower=function(b){return E(b).toLowerCase()},f.toNumber=S,f.toSafeInteger=function(b){return Sa(D(b),-9007199254740991,9007199254740991)},f.toString=E,f.toUpper=function(b){return E(b).toUpperCase()},f.trim=function(b,a,c){return(b=E(b))?c||a===k?b.replace(yc,""):(a+="")?(b=b.match(aa),a=a.match(aa),b.slice(ga(b,a),Ic(b,a)+1).join("")):b:b},f.trimEnd=function(b,a,c){return(b=E(b))?c||a===k?b.replace(Mg,""):(a+="")?(b=b.match(aa),b.slice(0,Ic(b,a.match(aa))+1).join("")):b:b},f.trimStart=function(b,
a,c){return(b=E(b))?c||a===k?b.replace(Ng,""):(a+="")?(b=b.match(aa),b.slice(ga(b,a.match(aa))).join("")):b:b},f.truncate=function(b,a){var c=30,e="...";if(N(a))var f="separator"in a?a.separator:f,c="length"in a?D(a.length):c,e="omission"in a?E(a.omission):e;b=E(b);var g=b.length;if(qb.test(b))var h=b.match(aa),g=h.length;if(c>=g)return b;if(g=c-cb(e),1>g)return e;if(c=h?h.slice(0,g).join(""):b.slice(0,g),f===k)return c+e;if(h&&(g+=c.length-g),ae(f)){if(b.slice(g).search(f)){var l=c;f.global||(f=
Dc(f.source,E(Fd.exec(f))+"g"));for(f.lastIndex=0;h=f.exec(l);)var m=h.index;c=c.slice(0,m===k?g:m)}}else b.indexOf(f,g)!=g&&(f=c.lastIndexOf(f),-1<f&&(c=c.slice(0,f)));return c+e},f.unescape=function(b){return(b=E(b))&&Og.test(b)?b.replace(se,we):b},f.uniqueId=function(b){var a=++lf;return E(b)+a},f.upperCase=pg,f.upperFirst=ee,f.each=Od,f.eachRight=Pd,f.first=Kd,Bc(f,function(){var b={};return ka(f,function(a,c){O.call(f.prototype,c)||(b[c]=a)}),b}(),{chain:!1}),f.VERSION="4.5.1",e("bind bindKey curry curryRight partial partialRight".split(" "),
function(b){f[b].placeholder=f}),e(["drop","take"],function(b,a){C.prototype[b]=function(c){var e=this.__filtered__;if(e&&!a)return new C(this);c=c===k?1:R(D(c),0);var f=this.clone();return e?f.__takeCount__=fa(c,f.__takeCount__):f.__views__.push({size:fa(c,4294967295),type:b+(0>f.__dir__?"Right":"")}),f};C.prototype[b+"Right"]=function(a){return this.reverse()[b](a).reverse()}}),e(["filter","map","takeWhile"],function(b,a){var c=a+1,e=1==c||3==c;C.prototype[b]=function(b){var a=this.clone();return a.__iteratees__.push({iteratee:z(b,
3),type:c}),a.__filtered__=a.__filtered__||e,a}}),e(["head","last"],function(b,a){var c="take"+(a?"Right":"");C.prototype[b]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(b,a){var c="drop"+(a?"":"Right");C.prototype[b]=function(){return this.__filtered__?new C(this):this[c](1)}}),C.prototype.compact=function(){return this.filter(ha)},C.prototype.find=function(b){return this.filter(b).head()},C.prototype.findLast=function(b){return this.reverse().find(b)},C.prototype.invokeMap=
x(function(b,a){return"function"==typeof b?new C(this):this.map(function(c){return gb(c,b,a)})}),C.prototype.reject=function(b){return b=z(b,3),this.filter(function(a){return!b(a)})},C.prototype.slice=function(b,a){b=D(b);var c=this;return c.__filtered__&&(0<b||0>a)?new C(c):(0>b?c=c.takeRight(-b):b&&(c=c.drop(b)),a!==k&&(a=D(a),c=0>a?c.dropRight(-a):c.take(a-b)),c)},C.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},C.prototype.toArray=function(){return this.take(4294967295)},
ka(C.prototype,function(b,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),e=/^(?:head|last)$/.test(a),g=f[e?"take"+("last"==a?"Right":""):a],h=e||/^find/.test(a);g&&(f.prototype[a]=function(){var a=this.__wrapped__,d=e?[1]:arguments,l=a instanceof C,m=d[0],q=l||B(a),p=function(b){return b=g.apply(f,r([b],d)),e&&t?b[0]:b};q&&c&&"function"==typeof m&&1!=m.length&&(l=q=!1);var t=this.__chain__,u=!!this.__actions__.length,m=h&&!t,l=l&&!u;return!h&&q?(a=l?a:new C(this),a=b.apply(a,d),a.__actions__.push({func:Hb,
args:[p],thisArg:k}),new Z(a,t)):m&&l?b.apply(this,d):(a=this.thru(p),m?e?a.value()[0]:a.value():a)})}),e("pop push shift sort splice unshift".split(" "),function(b){var a=Kb[b],c=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",e=/^(?:pop|shift)$/.test(b);f.prototype[b]=function(){var b=arguments;return e&&!this.__chain__?a.apply(this.value(),b):this[c](function(c){return a.apply(c,b)})}}),ka(C.prototype,function(b,a){var c=f[a];if(c){var e=c.name+"";(jb[e]||(jb[e]=[])).push({name:a,func:c})}}),jb[Cb(k,
2).name]=[{name:"wrapper",func:k}],C.prototype.clone=function(){var b=new C(this.__wrapped__);return b.__actions__=U(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=U(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=U(this.__views__),b},C.prototype.reverse=function(){if(this.__filtered__){var b=new C(this);b.__dir__=-1;b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b},C.prototype.value=function(){var b,a=this.__wrapped__.value(),
c=this.__dir__,e=B(a),f=0>c,g=e?a.length:0;b=0;for(var h=g,l=this.__views__,m=-1,k=l.length;++m<k;){var q=l[m],p=q.size;switch(q.type){case "drop":b+=p;break;case "dropRight":h-=p;break;case "take":h=fa(h,b+p);break;case "takeRight":b=R(b,h-p)}}if(b={start:b,end:h},h=b.start,l=b.end,b=l-h,f=f?l:h-1,h=this.__iteratees__,l=h.length,m=0,k=fa(b,this.__takeCount__),!e||200>g||g==b&&k==b)return ld(a,this.__actions__);e=[];a:for(;b--&&k>m;){f+=c;g=-1;for(q=a[f];++g<l;){var r=h[g],p=r.type,r=(0,r.iteratee)(q);
if(2==p)q=r;else if(!r){if(1==p)continue a;break a}}e[m++]=q}return e},f.prototype.at=Of,f.prototype.chain=function(){return Nd(this)},f.prototype.commit=function(){return new Z(this.value(),this.__chain__)},f.prototype.flatMap=function(b){return this.map(b).flatten()},f.prototype.next=function(){this.__values__===k&&(this.__values__=tc(this.value()));var b=this.__index__>=this.__values__.length,a=b?k:this.__values__[this.__index__++];return{done:b,value:a}},f.prototype.plant=function(b){for(var a,
c=this;c instanceof X;){var e=Nc(c);e.__index__=0;e.__values__=k;a?f.__wrapped__=e:a=e;var f=e,c=c.__wrapped__}return f.__wrapped__=b,a},f.prototype.reverse=function(){var b=this.__wrapped__;return b instanceof C?(this.__actions__.length&&(b=new C(this)),b=b.reverse(),b.__actions__.push({func:Hb,args:[qc],thisArg:k}),new Z(b,this.__chain__)):this.thru(qc)},f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function(){return ld(this.__wrapped__,this.__actions__)},Ma&&(f.prototype[Ma]=Se),f}var k,
Jb=1/0,$e=NaN,Jg=/\b__p\+='';/g,Kg=/\b(__p\+=)''\+/g,Lg=/(__e\(.*?\)|\b__t\))\+'';/g,se=/&(?:amp|lt|gt|quot|#39|#96);/g,re=/[&<>"'`]/g,Og=RegExp(se.source),Dg=RegExp(re.source),uf=/<%-([\s\S]+?)%>/g,vf=/<%([\s\S]+?)%>/g,le=/<%=([\s\S]+?)%>/g,Oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ne=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Ec=/[\\^$.*+?()[\]{}|]/g,Eg=RegExp(Ec.source),yc=/^\s+|\s+$/g,Ng=/^\s+/,Mg=/\s+$/,Qe=/\\(\\)?/g,Hg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
Fd=/\w*$/,Fg=/^0x/i,Ze=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Rb=/^(?:0|[1-9]\d*)$/,cf=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Mb=/($^)/,Ig=/['\n\r\u2028\u2029\\]/g,df=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,aa=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
qb=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,gf=/[a-zA-Z0-9]+/g,ff=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
ef=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hf="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),K={};K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=
K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0;K["[object Arguments]"]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object Boolean]"]=K["[object Date]"]=K["[object Error]"]=K["[object Function]"]=K["[object Map]"]=K["[object Number]"]=K["[object Object]"]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object WeakMap]"]=!1;var I={};I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=
I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0;I["[object Error]"]=I["[object Function]"]=I["[object WeakMap]"]=!1;var Ob={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Pb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Sb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},X={"function":!0,object:!0},Qb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gg=parseFloat,Ye=parseInt,
xa=X[typeof exports]&&exports&&!exports.nodeType?exports:k,oa=X[typeof module]&&module&&!module.nodeType?module:k,ge=oa&&oa.exports===xa?xa:k,Hc=pa(xa&&oa&&"object"==typeof global&&global),ob=pa(X[typeof self]&&self),ab=pa(X[typeof window]&&window),X=pa(X[typeof this]&&this),ma=Hc||ab!==(X&&X.window)&&ab||ob||X||Function("return this")(),Da=Mc();(ab||ob||{})._=Da;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Da}):xa&&
oa?(ge&&((oa.exports=Da)._=Da),xa._=Da):ma._=Da}).call(this);
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(h,c){var g=function(a){a=a||"";this.name="LocalisedError";h.isObject(a)&&_.extend(this,a);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(a)||this.title||this.details||this.additionalInfo);this.title=c.getMessage(this.title);this.details=a.fileName?c.getMessage(this.details,a.fileName):c.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=c.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,g)};g.prototype=Object.create(Error.prototype);return g.prototype.constructor=g});define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,c);this.fatal=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTException=c});
define("background/store/fileDetails",["qowtRoot/utils/typeUtils","qowtRoot/errors/qowtException"],function(h,c){var g=function(a){this.mimeType=a.mimeType||a.mimeType_;this.streamURL=a.streamURL||a.streamURL_;this.originalURL=a.originalURL||a.originalURL_;this.preferredFilename=a.preferredFilename||a.preferredFilename_;this.driveDocId=a.driveDocId||a.driveDocId_;this.userFile=a.userFile||a.userFile_;this.tabId=a.tabId||a.tabId_;this.privateFilePath=a.privateFilePath||a.privateFilePath_;this.downloadFilePath=
a.downloadFilePath||a.downloadFilePath_;this.timestamp=a.timestamp||a.timestamp_;this.observerFunc_=void 0;Object.seal(this)};g.prototype=Object.create(Object.prototype,{tabId:{set:function(a){this.tabId_=a;this.invokeObserver_()},get:function(){return this.tabId_}},privateFilePath:{set:function(a){this.privateFilePath_=a;this.invokeObserver_()},get:function(){return this.privateFilePath_}},downloadFilePath:{set:function(a){this.downloadFilePath_=a;this.invokeObserver_()},get:function(){return this.downloadFilePath_}},
timestamp:{set:function(a){this.timestamp_=a;this.invokeObserver_()},get:function(){return this.timestamp_}},mimeType:{set:function(a){this.mimeType_=a;this.invokeObserver_()},get:function(){return this.mimeType_}},streamURL:{set:function(a){this.streamURL_=a;this.invokeObserver_()},get:function(){return this.streamURL_}},originalURL:{set:function(a){this.originalURL_=a;this.invokeObserver_()},get:function(){return this.originalURL_}},preferredFilename:{set:function(a){this.preferredFilename_=a;this.invokeObserver_()},
get:function(){return this.preferredFilename_}},userFile:{set:function(a){this.userFile_=a;this.invokeObserver_()},get:function(){return this.userFile_}},driveDocId:{set:function(a){this.driveDocId_=a;this.invokeObserver_()},get:function(){return this.driveDocId_}}});g.prototype.constructor=g;g.prototype.addObserver=function(a){if(!h.isFunction(a))throw new c("Non-function observer provided to FileDetails object");this.observerFunc_=a};g.prototype.hasExpired=function(){return!this.tabId&&(new Date).getTime()-
this.timestamp>a};g.prototype.toJSON=function(){var a=_.extend({},this);a.userFile_=void 0;return a};var a=7776E6;g.prototype.invokeObserver_=function(){this.observerFunc_&&this.observerFunc_()};return g});define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(h){return{setItem:function(c,g){try{window.localStorage.setItem(c,g)}catch(a){throw new h({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:a.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var h=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var g=(h+16*Math.random())%16|0;h=Math.floor(h/16);return("x"===c?g:g&7|8).toString(16)})}}});
define("background/store/fileStore",["background/store/fileDetails","qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid"],function(h,c,g){var a={init:function(){try{e=(e=c.getItem("qo_file_store"))?JSON.parse(e):{}}catch(a){e={},console.warn("Failed to initialize file store so resetting it to be empty: "+a)}for(var g in e){var v=new h(e[g]);v.addObserver(u);e[g]=v}},addEntry:function(a){var c;a instanceof h&&(a.addObserver(u),c=g.generateUUID(),e[c]=a,u());return c},getEntry:function(a){return e[a]},
findTabId:function(a){var c=[];if(a)for(var g in e)e[g].tabId===a&&c.push(g);return 0<c.length?c:void 0},removeAllTabIds:function(){for(var a in e)e[a].tabId=void 0},deleteOrphans:function(a){for(var c=[],g=a.length,h=0;h<g;h++){var r=a[h];if(!r.isDirectory){var r=r.fullPath,w;w=void 0;if(r){var J=void 0;for(J in e)if(e[J].privateFilePath===r||e[J].downloadFilePath===r){w=J;break}}if(!e[w]||e[w].hasExpired())c.push(r),delete e[w]}}u();return c},window__:function(){return window}},e,u=function(){var g;
a.window__()&&(g=JSON.stringify(e),c.setItem("qo_file_store",g))};return a});
define("background/fileReaper",["background/store/fileStore","qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when","qowtRoot/features/utils","third_party/lo-dash/lo-dash.min"],function(h,c,g,a){var e={init:function(){g(r()).then(w)},addLock:function(a){l.push(a)},removeLock:function(a){a=l.indexOf(a);-1!==a&&l.splice(a,1)}},u,p=!1,v=[],l=[],m=0,r=function(){var a;return function(){var c=g.defer();a?c.resolve(a):window.webkitRequestFileSystem(window.TEMPORARY,1048576,function(e){a=e;c.resolve(a)},
function(){c.reject(Error("File Reaper failed to access the file system"))});return c.promise}}(),w=function(){var a=_.throttle(J,3E4);chrome.tabs.onRemoved.addListener(function(c){e.removeLock(c);h.findTabId(c)&&a()})},J=function(){m||0<l.length||a.isEnabled("suppressFileReapear")||(h.removeAllTabIds(),p=!1,u=window.setTimeout(A,3E5),chrome.windows.getAll({populate:!0},function(a){for(var c=a.length,e=0;e<c;e++)a[e].tabs.forEach(function(a){m++;chrome.tabs.sendMessage(a.id,"reaperCheck",F.bind(this,
a.id))})}))},F=function(a,c){if(p)H(c)&&console.warn("Reaper received a belated Quickoffice tab response - this may result in its private temp file being incorrectly deleted");else{if(H(c)){var e=h.getEntry(c.uuid);e&&(e.tabId=a)}1===m?(window.clearTimeout(u),0<l.length?m=0:t()):m--}},A=function(){p=!0;0<l.length?m=0:t()},t=function(){g(r()).then(function(a){v=[];var c=a.root.createReader(),e=function(){c.readEntries(function(a){0<a.length?(a.forEach(function(a){v.push(a)}),e()):y(v)},y)};e()})},
y=function(a){0<l.length||!c.isList(a)||h.deleteOrphans(a).forEach(function(a){q(a)});m=0},q=function(a){a&&g(r()).then(function(c){c.root.getFile(a,{create:!1},function(c){c.remove(function(){console.log("File Reaper has deleted file "+a)})})})},H=function(a){return c.isObject(a)&&a.hasOwnProperty("uuid")};return e});
define("utils/logUtils",["qowtRoot/utils/typeUtils"],function(h){return{logError:function(c){c&&c.stack?h.isList(c.stack)?(console.error(c.message),c.stack.forEach(function(c){console.error(c.toString())})):console.error(c.stack):console.error(c)}}});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function h(a,e){var g=[],h=[],p=[],F=[];u[a]&&u[a].length&&(v++,u[a].forEach(function(a){a.config.after?h.push(a):g.push(a);a.config.once&&F.push(a)}),g.concat(h).forEach(function(c){p.push(c.callback(a,e))}),F.forEach(function(a){c(a.token)}));return Promise.all(p)}function c(a){var c;_.values(u).some(function(e){return e.some(function(g,h){return g.token===a?(c=e.splice(h,1)[0],!0):!1})});return c}function g(a){var c=
0;return c=a?u[a]?u[a].length:0:_.values(u).reduce(function(a,c){return a+c.length},0)}function a(){u={}}var e=Object.create(Object.prototype,{subscriberCount:{get:function(){return g()}},registeredSignals:{get:function(){return _.keys(u)}},publishCount:{get:function(){return v}}});e.subscribe=function(a,c,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");e=e||{};e.once=!!e.once;e.after=!!e.after;var g=(++p).toString();u[a]=
u[a]||[];u[a].push({token:g,callback:c,config:e});return g};e.publish=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid signal");c=c||{};return h(a,c)};e.doAction=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid action");c=c||{};c=_.isString(c)?{contentType:c}:c;return h("qowt:doAction",{action:a,context:c})};e.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return c(a)}};e.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return g(a)};e.clear=a;e.reset=function(){a();v=p=0};var u={},p=0,v=0;return e});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/domListener",["qowtRoot/models/env"],function(h){var c={},g=0,a=function(a,e,g,m,r){r=r||!1;e||(console.warn("invalid element supplied for addListener"),e=h.rootNode?h.rootNode:window.document);e.addEventListener(g,m,r);a&&(c[a]=c[a]||[],c[a].push({element:e,eventName:g,handlerFunction:m,useCapture:r}))},e=function(a,c,e,g){g=g||!1;a||(console.warn("invalid element supplied for removeListener"),a=h.rootNode?h.rootNode:window.document);a.removeEventListener(c,e,g)},u=function(a){if(a=
c[a])for(;0<a.length;){var g=a.pop();e(g.element,g.eventName,g.handlerFunction,g.useCapture)}};return{add:function(c,e,g,h,r){a(c,e,g,h,r)},removeGroup:function(a){u(a)},reset:function(){for(var a in c)u(a)},addListener:function(c,e,h,m){a("__DOMLISTENER"+g++,c,e,h,m)},removeListener:function(a,c,g,h){e(a,c,g,h)},dispatchEvent:function(a,c,e){a||(console.warn("invalid element supplied for dispatchEvent"),a=h.rootNode?h.rootNode:window.document);var g=document.createEvent("Event");g.initEvent(c,!0,
!1);g.detail=e;g.eventName=c;a.dispatchEvent(g)}}});
define("qowtRoot/customElements/ui/shareButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("primary");this.classList.add("blue");this.innerText=g.getMessage("share_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);
c.addListener(this,"mouseout",this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",g.getMessage("share_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"share",context:{contentType:"common"}})};a.onMouseOver_=function(){var a={name:"share",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",this.onMouseOver_);
c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTShareButton=document.registerElement("qowt-sharebutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/presentButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=g.getMessage("present_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,
"mouseout",this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",g.getMessage("present_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"startSlideshow",context:{contentType:"presentation"}})};a.onMouseOver_=function(){var a={name:"presentation",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",this.onMouseOver_);
c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTPresentButton=document.registerElement("qowt-presentbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/downloadButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,g){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=g.getMessage("download_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,
"mouseout",this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",g.getMessage("download_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"download",context:{contentType:"common"}})};a.onMouseOver_=function(){var a={name:"download",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_(),this.blur()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",
this.onMouseOver_);c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTDownloadButton=document.registerElement("qowt-downloadbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/appIcon",["qowtRoot/models/env","qowtRoot/utils/i18n","qowtRoot/utils/domListener"],function(h,c,g){var a=Object.create(HTMLElement.prototype),e={word:"http://docs.google.com/document",sheet:"http://docs.google.com/spreadsheets",point:"http://docs.google.com/presentation"};a.createdCallback=function(){var a=document.createElement("a");a.href=e[h.app];a.target="_blank";a.classList.add("qowt-main-appIcon");a.setAttribute("tabindex",0);a.setAttribute("role","link");
var p=h.app+c.getMessage("app_icon_aria_spoken_word");a.setAttribute("aria-label",p);g.addListener(a,"focus",this.onFocus_.bind(this),!1);this.appendChild(a)};a.appendTo=function(a){a.appendChild(this)};a.onFocus_=function(a){if(a.path&&-1!==Array.prototype.slice.call(a.path).indexOf(this)){a=this.querySelector("a.qowt-main-appIcon").getAttribute("aria-label")+" "+this.querySelector("a.qowt-main-appIcon").getAttribute("role");var c=window.cvox;c&&c.Api.speak(a,0)}};window.QOWTAppIcon=document.registerElement("qowt-app-icon",
{prototype:a});return{}});
define("qowtRoot/configs/common",["qowtRoot/customElements/ui/shareButton","qowtRoot/customElements/ui/presentButton","qowtRoot/customElements/ui/downloadButton","qowtRoot/customElements/ui/appIcon"],function(){var h={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",
defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",
getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:h.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:h.DIALOGUE_CONFIG,DEFAULT_COLORS:h.DEFAULT_COLORS,ZOOM:h.ZOOM,LAYOUT_DEFAULT_MAXZOOM:h.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:h.LAYOUT_DEFAULT_MINZOOM,
LAYOUT_DEFAULT_ZOOM_LEVEL:h.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return h});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(h,c,g){var a=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};a.prototype=Object.create(Object.prototype);a.prototype.constructor=
a;a.prototype.connect=function(a,c){if(!a||null===a||!h.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided callback function is not of the correct type");for(var e=this.pendingConnections_.length,p=0;p<e;p++)if(this.pendingConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
e=this.acceptedConnections_.length;for(p=0;p<e;p++)if(this.acceptedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");e=this.completedConnections_.length;for(p=0;p<e;p++)if(this.completedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");e={win:a,callback:c,currentWaitTime:0,deferred:g.defer()};this.pendingConnections_.push(e);this.tryToConnect_(e);return e.deferred.promise};
a.prototype.pushMessage=function(a){if(!h.isObject(a))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var c=this.completedConnections_.length;if(0===c)this.pendingMsgs_.push(a);else{if(!h.isObject(a))throw Error("Cannot mark non-object value as quickoffice message");a.qoMessageBus=!0;this.msgQueue_.length>=e&&this.msgQueue_.shift();this.msgQueue_.push(a);for(var g=0;g<c;g++)this.completedConnections_[g].win.postMessage(a,"*")}};a.prototype.listen=function(a,
c){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:c})};a.prototype.stopListening=function(a){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var c=this.listeners_.length,e=0;e<c;e++)if(this.listeners_[e].listener===a){this.listeners_.splice(e,
1);break}};a.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,g=0;g<e;g++)if(a===this.completedConnections_[g].win){c=!0;break}return c};a.prototype.tryToConnect_=function(a){a.currentWaitTime>c.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=c.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(u,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),c.kMESSAGE_BUS_CONNECTION_RETRY))};a.prototype.handleTimeOut_=
function(a){var e=c.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(e=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(c.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?e+":qowt too late to connect":e+":qowt and app connected:handshake failed?":e+":qowt failed to connect");a.deferred.reject(Error(e))};a.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===u?this.handleConnectionRequestMsg_(a):a.data===p?this.handleConnectionAcceptedMsg_(a):a.data===v?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&this.handleClientMsg_(a)}};a.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");a.source.postMessage(p,"*")};a.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");
for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(v,"*");break}};a.prototype.handleConnectionAckMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=
0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};a.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,g=0;g<e;g++){var h=c[g];!h||h.filter&&!h.filter.call(this,a)||h.listener.call(this,a)}e=this.completedConnections_.length;for(g=0;g<e;g++)this.completedConnections_[g].win!==a.source&&this.completedConnections_[g].win.postMessage(a.data,
"*")}};a.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var e=10,u="qoConnectionRequest",p="qoConnectionAccepted",v="qoConnectionAck";return a});define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(h){return new h});
define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,c);this.fatal=!1};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTError=c});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,c);this.fatal=!1;this.silent=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTSilentError=c});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(h,c,g,a,e,u){function p(a){a.error?(console.error("%s caught js exception: %s",A,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),l(a.error)):console.error(a)}function v(a,c){console.log("%s caught deprecated error",
A);console.log(c);c.isDeprecatedError=!0;l(c)}function l(g){if(g instanceof Error)void 0===g.fatal&&(g.fatal=!0);else{console.log("%s converting deprecated/bad error",A);switch(!0){case h.isObject(g)&&g.isDeprecatedError:var l={title:g.errorId?g.errorId+"_short_msg":void 0,details:g.errorId?g.errorId+"_msg":void 0,linkData:g.linkData,message:g.additionalInfo};g=g.fatal?new u(l):g.silent?new e(l):new a(l);break;case h.isNumber(g):g=new u({code:g});break;case h.isString(g):g=new u(g);break;default:g=
new u(g.toString())}g.stack=void 0}y.push(g);m(g);if(!g.isSynced){console.log("%s pushing error to msg bus",A);l=_.extend({},g);l.name=g.name;l.message=g.message;l.stack=g.stack;try{c.pushMessage({id:J,error:JSON.stringify(l)})}catch(p){}}}function m(a){console.log("%s dispatching error to observers",A);F.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function r(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
A);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;l(a)}}function w(a){return a&&a.data&&a.data.id===J}var J="errorSync",F=[],A="sandbox"===window.name?"QOWT":"App",t,y=[];return{init:function(){t=
g.subscribe("qowt:error",v);window.addEventListener("error",p);c.listen(r,w);Error.stackTraceLimit=Infinity},reset:function(){g.unsubscribe(t);window.removeEventListener("error",p);c.stopListening(r);F=[]},handleError:function(a){l(a)},addObserver:function(a){h.isFunction(a)?F.push(a):console.warn("Error observer must be a function")},observers:function(){return F},lastError:function(){return y[y.length-1]}}});
define("background/chromeHandler","background/store/fileStore background/store/fileDetails background/fileReaper utils/logUtils qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError qowtRoot/third_party/when/when".split(" "),function(h,c,g,a,e,u,p){function v(c,e){var g=c.length,h=[];return e?J(e,c[0]):m().catch(function(){return l()}).catch(function(){return r()}).then(function(a){if(A(a)){for(var e=0;e<g;e++)0===e&&a.useTabId?h.push(J(a.useTabId,c[e])):h.push(w(a.id,c[e]));return p.all(h)}throw Error("Could not find valid window");
}).catch(a.logError)}function l(){return p.promise(function(a,c){chrome.windows.getLastFocused({populate:!1},function(e){A(e)?a(e):c(Error("invalid window"))})})}function m(){return p.promise(function(a,c){chrome.windows.getCurrent({populate:!1},function(e){A(e)?a(e):c(Error("invalid window"))})})}function r(){return p.promise(function(a,c){chrome.windows.create({type:"normal",focused:!0},function(e){A(e)?(e.useTabId=e.tabs[0].id,a(e)):c(Error("invalid window"))})})}function w(a,c){var e={active:!0,
windowId:a,url:"../views/app.html"};return p.promise(function(a){chrome.tabs.create(e,a)}).then(function(a){J(a.id,c)})}function J(a,c){var e={active:!0,url:"../views/app.html?uuid="+c};return p.promise(function(g,l){var m=h.getEntry(c);m?(m.tabId=a,chrome.tabs.update(a,e,g)):l()})}function F(a){return a&&void 0!==a.id}g.init();var A=function(a){return a&&void 0!==a.id&&!a.incognito};return{handleIncomingMsg:function(a,c){"driveEnabled"===c.msg&&a.postMessage({driveEnabled:!0})},handleStream:function(a){var g;
a:{var l=a.responseHeaders;if(l&&(l=l["Content-Disposition"]||l["content-disposition"]))try{g=l.split("=")[1].trim().replace(/\"/g,"");break a}catch(m){e.handleError(new u("Failed to parse Content-Disposition Header: "+m));g=void 0;break a}g=void 0}g=new c({mimeType:a.mimeType,streamURL:a.streamUrl,originalURL:a.originalUrl,preferredFilename:g});g=h.addEntry(g);return v(Array(g),a.tabId)},handleChromeOSFile:function(a){var e,g=p.reject(Error("No file entries were passed to open"));A=F;if(a){e=[];
for(var l=0;l<a.length;++l){var m=new c({userFile:a[l].entry});e.push(h.addEntry(m))}e=v(e)}return e||g},handleDriveDoc:function(a){var e,g,l=p.reject(Error("No drive doc ids were passed to open"));if(a){g=[];for(var m=0;m<a.length;++m){var r=new c({driveDocId:a[m]}),r=h.addEntry(r);0===m?e=r:g.push(r)}g=0===g.length?p.resolve(e):v(g).yield(e)}return g||l}}});
define("background/pageAPI",["background/fileReaper","background/store/fileStore","background/chromeHandler"],function(h,c,g){window.handleDriveDoc=function(a){return g.handleDriveDoc(a)};window.getFileDetails=function(a){return c.getEntry(a)};window.addReaperLock=function(a){h.addLock(a)};window.removeReaperLock=function(a){h.removeLock(a)};window.cacheTabId=function(a,e){var g=c.getEntry(a);g&&(g.tabId=e)};window.cachePrivateFilePath=function(a,e){var g=c.getEntry(a);g&&(g.privateFilePath=e)};window.cacheDownloadFilePath=
function(a,e){var g=c.getEntry(a);g&&(g.downloadFilePath=e)};window.cacheTimestamp=function(a){if(a=c.getEntry(a))a.timestamp=(new Date).getTime()};window.isReady=!0;return{}});
(function(){function h(c){console.error(c.stack?c.stack:c)}var c=(new Promise(function(c){require(["background/store/fileStore","background/chromeHandler","background/pageAPI"],function(a,e){a.init();c(e)})})).catch(h);(function(){var c=chrome&&chrome.runtime&&chrome.runtime.onConnectExternal&&chrome.runtime.onConnectExternal.addListener;c||console.warn("Missing Chrome Connect API... drive integration wont work");return c})()&&chrome.runtime.onConnectExternal.addListener(function(g){g.onDisconnect.addListener(function(){});
g.onMessage.addListener(function(a){c.then(function(c){c.handleIncomingMsg(g,a)}).catch(h)})});(function(){var c=chrome&&chrome.streamsPrivate&&chrome.streamsPrivate.onExecuteMimeTypeHandler&&chrome.streamsPrivate.onExecuteMimeTypeHandler.addListener;c||console.warn("Missing Chrome Streams API... blue links wont work");return c})()&&chrome.streamsPrivate.onExecuteMimeTypeHandler.addListener(function(g){c.then(function(a){a.handleStream(g)}).catch(h)});(function(){var c=chrome&&chrome.app&&chrome.app.runtime&&
chrome.app.runtime.onLaunched&&chrome.app.runtime.onLaunched.addListener;c||console.warn("Missing ChromeOS Runtime OnLaunched API... opening documents from file browser wont work");return c})()&&chrome.app.runtime.onLaunched.addListener(function(g){"qo_documents"===g.id&&c.then(function(a){a.handleChromeOSFile(g.items)}).catch(h)})})();define("background/backgroundMain",function(){});
